;/*FB_PKG_DELIM*/

__d("MAWMiActMaybeCreateActThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyE2EEMetadataThreadExistsV2","MAWCreateGroupThread","MAWCreateOneToOneThread","MAWGating","MAWMiActCreateThreadInActWithMiData","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return a.runInTransaction(function(a){return c("LSVerifyE2EEMetadataThreadExistsV2")(d("LSIntEnum").ofNumber(15),b,d("LSIntEnum").ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),c("LSFactory")(a)).then(function(){})},"readwrite")}function i(a,b,e){if(e==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Could not create optimistic thread because data was null\n      for threadKey: %s",d("I64").to_string(b.threadKey));var f=e.actorId;e=e.participantIds;var g=e.filter(function(a){return a!==d("I64").to_string(f)});if(d("LSMessagingThreadTypeUtil").isOneToOne(b.threadType)&&(g.length===1||d("MAWGating").isChatWithYourselfEnabled())){var h=g.length===1?g:e;return d("MAWCreateOneToOneThread").call(a,d("I64").of_string(h[0]),d("I64").to_string(b.threadKey))}else if(d("LSMessagingThreadTypeUtil").isGroup(b.threadType)&&g.length>1)return c("MAWCreateGroupThread")({db:a,offlineThreadingId:b.threadKey,participantIds:e});throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Did not know which type of optimistic thread to create for\n    threadKey: %s, participantsCount: %s, threadType: %s",d("I64").to_string(b.threadKey),e.length,d("LSIntEnum").toNumber(b.threadType))}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("MAWMiActCreateThreadInActWithMiData").miActCreateThreadInActWithMiData(a.serverThreadKey,a.jidInt64,a.thread.lastActivityTimestampMs,a.thread.lastReadWatermarkTimestampMs,d("LSMessagingThreadTypeUtil").isGroup(a.thread.threadType)));return{chatId:a.chatId,created:a.isCreated,jid:a.chatJid}});return k.apply(this,arguments)}var l=new Map();function a(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByThreadKey(a,b,"maybeCreateActThread"));switch(f.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:yield h(a,b);throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] We did not call MiActLoadExistingThread for threadKey: %s, threadState: %s",d("I64").to_string(b),f.type);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] MI inserted the thread but the mapping row was not\n        written or it was deleted for threadKey: %s",d("I64").to_string(b));case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:var g=d("I64").to_string(b),k=l.get(g);if(k!=null)return k;k=i(a,f.thread,e);l.set(g,k);return k;case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:return{chatId:f.chatId,created:!1,jid:f.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:return j(f);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:return{chatId:f.chatId,created:!1,jid:f.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY_BY_CHAT_ID:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY_BY_JID:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unhandled ACT thread creation state for threadKey:\n        %s",d("I64").to_string(b));default:f.type;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable miActThreadState.type: %s",f.type)}});return m.apply(this,arguments)}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessage",["I64","LSAuthorityLevel","LSHotEmojiSize","LSIntEnum","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessageSendStatus","LSQuickReplyType","MAWAdminMsg","MAWBridgeBuildMsg","MAWBumpThread","MAWCreateOptimisticSecureMessage","MAWLocalizationType","MWPActor.react","QPLUserFlow","asyncToGeneratorRuntime","cr:2472","qpl","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useReStore")(),e=d("MWPActor.react").useActor();return function(f,g,h,i,j,k,l){return a.runInTransaction(function(){var m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(m){var n=Date.now(),o=d("I64").of_float(n),p=(yield d("MAWCreateOptimisticSecureMessage").getOfflineThreadingId(m,h,j));l(p);var q=(yield d("MAWCreateOptimisticSecureMessage").getReply(m,h,f,j)),r=q[0];q=q[1];var s=(yield d("MAWBridgeBuildMsg").buildOptimisticMessage(a,m,g,p,h,r,o,k)),t=(yield d("MAWCreateOptimisticSecureMessage").getOptimisticReplySnippet(a,r,e));yield m.table("messages").add(babelHelpers["extends"]({},s,{authorityLevel:d("LSIntEnum").ofNumber(c("LSAuthorityLevel").OPTIMISTIC),displayedContentTypes:d("LSIntEnum").ofNumber(1),hasQuickReplies:!1,hotEmojiSize:i,isAdminMessage:!1,isCollapsed:!1,isUnsent:!1,messageId:p,offlineThreadingId:p,primarySortKey:o,quickReplyType:d("LSIntEnum").ofNumber(c("LSQuickReplyType").NONE),replyAttachmentType:d("MAWCreateOptimisticSecureMessage").getReplyAttachmentType(r),replyMediaPreviewHeight:q==null?void 0:q.previewHeight,replyMediaPreviewWidth:q==null?void 0:q.previewWidth,replyMediaUrl:d("MAWCreateOptimisticSecureMessage").getReplyMediaUrl(q),replyMediaUrlMimeType:q==null?void 0:q.playableUrlMimeType,replySnippet:t,replySourceId:f==null?void 0:f.messageId,replySourceType:f!=null?d("LSIntEnum").ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:f!=null?d("LSIntEnum").ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,senderId:e,sendStatus:d("LSIntEnum").ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:d("LSIntEnum").ofNumber(1),textHasLinks:!1,threadKey:h,timestampMs:o,viewFlags:d("LSIntEnum").ofNumber(0)}));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:j});s=b("cr:2472")==null?g:b("cr:2472").unvault(g);r=i!=null&&d("I64").equal(i,d("LSIntEnum").ofNumber(c("LSHotEmojiSize").SMALL))&&s==="\ud83d\udc4d"?"(Y)":g;yield d("MAWBumpThread").threadMutation(m,h,o,o,d("MAWAdminMsg").buildLocalizedString([r],[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT),e);return[p,n]});return function(a){return m.apply(this,arguments)}}(),"readwrite","ui")}}g["default"]=a}),98);
__d("MAWSecureComposerText",["Lexical","LexicalText","MAWJids","MessengerLexicalEntityTextNode"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.read(function(){var a=d("Lexical").$getRoot().getFirstChild();return a instanceof d("Lexical").ElementNode?a.getChildren().reduce(function(a,b){if(d("MessengerLexicalEntityTextNode").isMessengerLexicalEntityTextNode(b)){var c=b.getEntity();return a+("@"+d("MAWJids").toUserJid(c.id))}return a+b.getTextContent()},""):d("LexicalText").$rootTextContent()})}g.getTextFromEditorState=a}),98);
__d("useLSMessagingInitiatingSourceNumber",["LSMessagingInitiatingSource","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a==null)return;else if(a==="Inbox")return c("LSMessagingInitiatingSource").FACEBOOK_INBOX;else if(a==="FullscreenChat")return c("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN;else if(a==="ChatTab")return c("LSMessagingInitiatingSource").FACEBOOK_CHAT;else return c("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT}g["default"]=a}),98);
__d("MAWSecureTypingState",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MAWBridgeFireAndForget","MAWJids","MAWMiActOnActThreadReady","MWPActor.react","MessengerWebUXLogger","Promise","ReQL","WAChatState","asyncToGeneratorRuntime","gkx","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(!d("I64").equal(f,d("LSIntEnum").ofNumber(15)))return b("Promise").resolve(!0);f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("participants")).getKeyRange(e).filter(function(a){return!d("I64").equal(a.contactId,g)})));if(f==null)return!1;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("contacts")).getKeyRange(f.contactId)));return e==null?!1:d("I64").equal(e.blockedByViewerStatus,d("LSIntEnum").ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))});return i.apply(this,arguments)}var j=[];function a(a){var e=c("useReStore")(),f=d("MWPActor.react").useActor(),g=d("I64").to_string(a.threadKey),i=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger();return d("Int64Hooks").useCallbackInt64(function(k){d("I64").ge(a.authorityLevel,d("LSIntEnum").ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&d("LSMessagingThreadTypeUtil").isSecure(a.threadType)&&(c("gkx")("5514")&&d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&!j.includes(g)&&c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(e,a.threadKey,"MAWSecureTypingState",function(a,c,e){d("MAWBridgeFireAndForget").fireAndForget("backend","preEstablishSession",{groupJid:d("MAWJids").toGroupJid(e)});j.push(g);return b("Promise").resolve()})),c("promiseDone")(h(e,a.threadKey,a.threadType,f).then(function(c){return!c?b("Promise").resolve():d("MAWMiActOnActThreadReady").onActThreadReady(e,a.threadKey,"MAWSecureTypingState",function(c,e,f){i==null?void 0:i({eventName:"send_typing_indicators",threadKey:a.threadKey,threadType:a.threadType});d("MAWBridgeFireAndForget").fireAndForget("backend","sendChatStateFromComposer",{state:k?d("WAChatState").TYPING:d("WAChatState").IDLE,threadId:e});return b("Promise").resolve()})})))},[e,a.authorityLevel,a.threadKey,a.threadType,f,g,i])}g.useOnTypingStateChanged=a}),98);
__d("MAWSendFileMsgIfNecessary",["MAWSecureComposerUtils","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,d,e,f,g,i,j,k,l,m,n){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g,h,i,j,k,l,m,n,o){var p=[];if(f!=null){f={args:{durations:f.duration||0,isPtt:!0},file:f.file,type:"audio"};p.push([f,n])}if(h!=null){f=(yield window.fetch(h,{cache:"no-cache"}));h=(yield f.blob());f=i!=null;i=(yield d("MAWSecureComposerUtils").imagePreprocess(new File([h],"stickerFromPicker",{type:h.type}),f));p.push([i,n])}p=p.concat(g);h=p.map(function(b){var f=b[0];b=b[1];return d("MAWSecureComposerUtils").sendAttachment(a,c,j.threadKey,j.threadType,k,f,b,l,m,!1,e,o)});yield b("Promise").all(h)});return h.apply(this,arguments)}g.call=a}),98);
__d("MAWSendSecureMessageV2Utils",["I64","LSDatabaseSingleton","MAWMiActMaybeCreateActThread","MWPActor.react","ReQL","StickerConstants","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWPActor.react").useActor();return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e=(yield c("LSDatabaseSingleton")),f=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.table("participants")).getKeyRange(b).map(function(a){return d("I64").to_string(a.contactId)})));return c("MAWMiActMaybeCreateActThread")(e,b,{actorId:a,participantIds:f})});return function(a){return e.apply(this,arguments)}}()}function e(a){return a===c("StickerConstants").LIKE_STICKER_ID||a===c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||a===c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||a===c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID}g.useMaybeCreateThreadForMAWSendSecurMessageV2=a;g.isLikeStickerId=e}),98);
__d("useMAWSendSecureAttachmentMessage",["Int64Hooks","LSDatabaseSingleton","MAWExternalId","MAWMediaManagerUtils","MAWSendFileMsgIfNecessary","MAWSendSecureMessageV2Utils","MWPActor.react","Promise","WAStanzaUtils","asyncToGeneratorRuntime","gkx","useMWLSDefaultThreadSource"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2();return d("Int64Hooks").useCallbackInt64(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(g){var h=g.externalAttachmentUrl,i=g.mediaStagings,j=g.messageTypeParams,k=g.onGenerateOfflineMsgId,l=g.reply,m=g.s2sInstanceKey,n=g.stickerId,o=g.thread;g=g.voiceClip;var p=j.hasAttachment;if(!p)return;var q=j.hasFile,r=j.hasImage;j=j.hasVideo;var s=null;if(p)if(j||r||q&&c("gkx")("9045")){p=i[i.length-1];s=d("WAStanzaUtils").toStanzaId(p.offlineAttachmentId)}else s=d("MAWExternalId").generateExternalId();if(s!=null){k==null?void 0:k(s);j=i.reduce(function(a,b){var c=d("MAWMediaManagerUtils").MAWMediaManagerAttachments.get(b.offlineAttachmentId);c!=null&&a.push([c,d("WAStanzaUtils").toStanzaId(b.offlineAttachmentId)]);return a},[]);r=e(o.threadKey);q=(yield b("Promise").all([c("LSDatabaseSingleton"),f(o.threadKey)]));p=q[0];k=q[1];return d("MAWSendFileMsgIfNecessary").call(p,k.chatId,k.created,g,j,h,n,o,a,r,l,s,m)}});return function(a){return g.apply(this,arguments)}}(),[a,e,f])}g["default"]=a}),98);
__d("useMAWSendMessageV2",["I64","LSHotEmojiSize","LSIntEnum","MAWExternalId","MAWJobDefinitions","MAWTimedJob","MWPActor.react","MWPReplyContext.react","QPLUserFlow","WADualSendMsgUtils","WAJobOrchestratorTypes","asyncToGeneratorRuntime","qpl","react","requireDeferred","useLSMessagingInitiatingSourceNumber","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useContext,i=c("requireDeferred")("MWLogSend.bs").__setRef("useMAWSendMessageV2");function j(a){if(a==null)return;if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSHotEmojiSize").SMALL)))return 1;if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSHotEmojiSize").MEDIUM)))return 2;if(d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSHotEmojiSize").LARGE)))return 3}function a(){var a=c("useReStore")(),e=d("MWPActor.react").useActor(),f=h(d("MWPReplyContext.react").MWPReplyContext),g=f.reply,k=c("useLSMessagingInitiatingSourceNumber")();return function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,f,h,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=d("MAWExternalId").generateExternalId();f=babelHelpers["extends"]({content:m,initiatingSource:k,isFirstMsg:s,isForwarded:!1,openMessageOtid:o,openMessageParticipantCount:t,optimisticMsg:{msgId:p,ts:q},participantCount:u,s2sInstanceKey:y,s2sUserFlowQPLEvent:c("qpl")._(25313175,"1551"),source:n,specialTextSize:j(r)},v!=null&&{quote:v});w!=null&&(f.ephemeralSetting=w);x!=null&&(f.mentionedJids=[].concat(x));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob",{instanceKey:y});yield d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMsg",{args:f,chatJid:l,externalId:z,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));i.onReady(function(c){var f=d("I64").to_string(b),i=r!=null?3:0,j=d("WADualSendMsgUtils").isDualSendJid(l)?["dst:8"]:void 0;return c.log(a,b,h,z,[],e,n,i,g!=null,0,1,f,w==null?void 0:w.ephemeralExpirationInSec,j,void 0,x)})});return function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r){return f.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMarkOptimisticMessageAsFailed",["LSFactory","LSMarkOptimisticMessageFailed","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(){var a=c("useReStore")();return h(function(b){return a.runInTransaction(function(a){return c("LSMarkOptimisticMessageFailed")(b,c("LSFactory")(a))},"readwrite")},[a])}g["default"]=a}),98);
__d("useMAWSendSecureTextMessage",["MAWBridgeSendAndReceive","MAWDbMsg","MAWGetEphemeralSettings","MAWInternalLog","MAWSendSecureMessageV2Utils","MAWStateContext.react","MAWVault","Promise","WALoggerDeferred","asyncToGeneratorRuntime","emptyFunction","react","useMAWCreateOptimisticSecureMessage","useMAWSendMessageV2","useMWLSDefaultThreadSource","useMarkOptimisticMessageAsFailed"],(function(a,b,c,d,e,f,g){"use strict";e=d("react");var h=e.useCallback,i=e.useContext;function a(){var a=c("useMWLSDefaultThreadSource")(),e=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2(),f=i(d("MAWStateContext.react").MAWNonRerenderingStateContext),g=c("useMAWSendMessageV2")(),j=c("useMAWCreateOptimisticSecureMessage")(),k=c("useMarkOptimisticMessageAsFailed")(),l=d("MAWStateContext.react").useDispatchOptimisticSendMessage();return h(function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(h){var i=h.hotEmojiSize,m=h.mentionedJids,n=h.messageText,o=h.onGenerateOfflineMsgId,p=h.reply,q=h.s2sInstanceKey;h=h.thread;var r=null;try{var s;s=(yield b("Promise").all([e(h.threadKey),j(p,d("MAWVault").vault(n),h.threadKey,i,(s=q)!=null?s:0,m,(s=o)!=null?s:c("emptyFunction"))]));var t=s[0];s=s[1];r=s[0];s=s[1];o==null?void 0:o(r);l(r,Date.now());o=f().state.ephemeralSettings[t.jid];o==null&&(o=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(t.jid,h.threadKey)));var u=a(h.threadKey),v=null;if(p!=null){p=d("MAWDbMsg").toMsgId(p.messageId);p!=null&&(v=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:p})))}return g(h.threadKey,t.chatId,h.threadType,t.jid,n,u,void 0,r,s,i,t.created,void 0,void 0,v,o,m,q)}catch(a){r!=null&&(yield k(r));d("MAWInternalLog").internalLog("useMAWSendSecureTextMessage: send text message failed: "+a);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureTextMessage"],["Send text message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return h.apply(this,arguments)}}(),[j,l,f,a,k,e,g])}g["default"]=a}),98);
__d("useMAWSendSecureLinkXMAMessage",["FBLogger","Int64Hooks","MAWExternalId","MAWExternalLinkUtil","MAWSendSecureMessageV2Utils","asyncToGeneratorRuntime","useMAWSendSecureTextMessage","useMWLSDefaultThreadSource"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useMWLSDefaultThreadSource")(),e=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2(),f=c("useMAWSendSecureTextMessage")();return d("Int64Hooks").useCallbackInt64(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g=b.mentionedJids,h=b.messageText,i=b.onGenerateOfflineMsgId,j=b.reply,k=b.s2sInstanceKey,l=b.thread;b=b.threadKey;var m=d("MAWExternalLinkUtil").findFirstUrl(h);if(m==null||m.length===0)return f({mentionedJids:g,messageText:h,onGenerateOfflineMsgId:i,reply:j,s2sInstanceKey:k,thread:l});try{g=m[0];j=d("MAWExternalLinkUtil").findFirstAvailableOembedUrlAndRequestPair(m);l=g.entity.url;m=null;if(j!=null){l=j.oEmbedUrl;try{m=(yield d("MAWExternalLinkUtil").getOembedResponse(j.oEmbedRequest))}catch(a){c("FBLogger")("messenger_e2ee_web").mustfix("[External link] Failed to send External Link XMA.")}}g=d("MAWExternalId").generateExternalId();i==null?void 0:i(g);j=a(b);i=(yield e(b));return d("MAWExternalLinkUtil").sendExternalLinkXMA(h,m,l,i.jid,k,j,b,g)}catch(a){c("FBLogger")("messenger_e2ee_web").mustfix("[External link] Failed to send external link XMA ");throw a}});return function(a){return g.apply(this,arguments)}}(),[a,e,f])}g["default"]=a}),98);
__d("useMAWUpdateThreadCapabilities",["LSMessagingThreadTypeUtil","MAWUpdateLSThreadCapabilities","Promise","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(){var a=c("useReStore")();return h(function(c){return!d("LSMessagingThreadTypeUtil").isOneToOne(c.threadType)?b("Promise").resolve():a.runInTransaction(function(a){return d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,c.threadKey)},"readwrite")},[a])}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2Impl",["I64","Int64Hooks","LSDatabaseSingleton","LSIntEnum","LSMessagingThreadTypeUtil","MAWInternalLog","MAWOptimisticUpdateContactRelationship.bs","MWLSLogSend.bs","MWPActor.react","MWPReplyContext.react","MWPreloadableQueries","MWSharedMsgLogUtils","MWVersion.bs","MessageRequestsLog","Promise","ReQL","WALoggerDeferred","asyncToGeneratorRuntime","emptyFunction","react","useLSMessagingInitiatingSource","useMAWSendSecureAttachmentMessage","useMAWSendSecureLinkXMAMessage","useMAWSendSecureTextMessage","useMAWUpdateThreadCapabilities","useMWLSUnarchiveThread","useMWLSUpdateDraftMessage","useMWSendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useContext;function a(a){var e=d("MWPActor.react").useActor(),f=h(d("MWPReplyContext.react").MWPReplyContext),g=f.clearReply,i=c("useLSMessagingInitiatingSource")(),j=c("useMAWSendSecureTextMessage")(),k=c("useMAWSendSecureLinkXMAMessage")(),l=c("useMAWSendSecureAttachmentMessage")(),m=c("useMWLSUnarchiveThread")(),n=c("useMWLSUpdateDraftMessage")(),o=c("useMAWUpdateThreadCapabilities")();f=c("useMWSendToSentQPLLogger")();var p=f.addSendToSentAnnotations,q=f.markSendToSentSuccess;return d("Int64Hooks").useCallbackInt64(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){var h=f.externalAttachmentUrl,r=f.hotEmojiSize,s=f.lssTraceApi,t=f.mentionedJids,u=f.messageText,v=f.reply,w=f.s2sInstanceKey;w=w===void 0?0:w;var x=f.stickerId,y=f.thread;f=f.voiceClip;d("MAWInternalLog").internalLog("start to send message from UI");yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Starting message send"],"LOG");var z=(yield c("LSDatabaseSingleton")),A=d("LSMessagingThreadTypeUtil").isMessageRequest(y),B=d("I64").equal(y.parentThreadKey,d("LSIntEnum").ofNumber(-10)),C=(yield d("ReQL").toArrayAsync(d("MWPreloadableQueries").getMediaStagingQuery(z,y.threadKey))),D=d("MWSharedMsgLogUtils").getMessageTypeParams(u,r,v,x,h,f,C);p(w,yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(y,D,i));var E=c("emptyFunction");s!=null&&(d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(s,D,y,i),E=function(a){d("MWLSLogSend.bs").logSentHeroInteraction(s,a,{initiatingSource:i,isMessageRequest:A,mwVersion:d("MWVersion.bs").v2,threadType:y.threadType})});var F=[],G=D.hasAttachment,H=D.hasLinks;u!=null&&u!==""&&(H?F.push(k({mentionedJids:t,messageText:u,onGenerateOfflineMsgId:G?void 0:E,reply:v,s2sInstanceKey:w,thread:y,threadKey:y.threadKey})):F.push(j({hotEmojiSize:r,mentionedJids:t,messageText:u,onGenerateOfflineMsgId:G?void 0:E,reply:v,s2sInstanceKey:w,thread:y})));G&&F.push(l({externalAttachmentUrl:h,mediaStagings:C,messageTypeParams:D,onGenerateOfflineMsgId:E,reply:v,s2sInstanceKey:w,stickerId:x,thread:y,voiceClip:f}));yield b("Promise").all(F);q(w);d("MAWInternalLog").internalLog("send message is done");yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Send message is done"],"LOG");a();d("MAWOptimisticUpdateContactRelationship.bs").call(y,z,e);g(y.threadKey,!1);yield b("Promise").allSettled([o(y),n(y.threadKey,"")]);A&&d("MessageRequestsLog").logActionConfirmed(y,1);B&&m(y.threadKey)});return function(a){return f.apply(this,arguments)}}(),[e,p,g,i,q,a,l,k,j,m,n,o])}g["default"]=a}),98);
__d("useMAWFetchAndDispatchEphemeralSettings",["I64","MAWGetEphemeralSettings","MAWMiActOnActThreadReady","MAWStateContext.react","Promise","WALoggerDeferred","WATimeUtils","asyncToGeneratorRuntime","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ephemeral settings in memory]: MAWGetEphemeralSettings for "," returns ",", set it to 0"]);h=function(){return a};return a}e=d("react");var i=e.useCallback,j=e.useContext;function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(a,b));if(b!=null&&b.ephemeralExpirationInSec!=null&&b.ephemeralLastUpdatedOrSetTimestamp!=null)c(a,b);else{void d("WALoggerDeferred").LOG(h(),a,b);var e=d("WATimeUtils").unixTime();c(a,{ephemeralExpirationInSec:b==null?0:(c=b.ephemeralExpirationInSec)!=null?c:0,ephemeralLastUpdatedOrSetTimestamp:e})}});return l.apply(this,arguments)}function a(){var a=c("useReStore")(),e=j(d("MAWStateContext.react").MAWNonRerenderingStateContext),f=d("MAWStateContext.react").useDispatchEphemeralSettingsUpdatedForUI();return i(function(g){if(!c("gkx")("9025")){var h=e().state.ephemeralSettings;c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a,d("I64").of_string(g),"fetch-ephemeral-settings",function(a,c,e){return h[e]!=null?b("Promise").resolve():k(e,d("I64").of_string(g),f)}))}},[a,f,e])}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2",["I64","Int64Hooks","MAWJids","MAWSendSecureMessageV2Utils","MWPReplyContext.react","promiseDone","qpl","react","unrecoverableViolation","useCometInteractionTracing","useMAWFetchAndDispatchEphemeralSettings","useMAWSendSecureMessageV2Impl","useMWSendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useContext;function a(a,b,e){var f=h(d("MWPReplyContext.react").MWPReplyContext),g=f.reply,i=c("useMAWSendSecureMessageV2Impl")(e),j=c("useCometInteractionTracing")(c("qpl")._(30605384,"573"),"fast","INTERACTION",void 0);f=c("useMWSendToSentQPLLogger")();var k=f.markSendToSentFail,l=f.markSendToSentStart,m=c("useMAWFetchAndDispatchEphemeralSettings")();d("Int64Hooks").useEffectInt64(function(){m(d("I64").to_string(a.threadKey))},[m,a.threadKey]);return function(e,f,h,m,n,o,p,q,r,s){var t=f==null?void 0:f.map(function(a){return d("MAWJids").toUserJid(a.id)}),u=e;h!=null&&d("MAWSendSecureMessageV2Utils").isLikeStickerId(d("I64").to_string(h))&&(u="\ud83d\udc4d");var v=l();j(function(d){c("promiseDone")(i({externalAttachmentUrl:o,hotEmojiSize:m,lssTraceApi:d,mentionedJids:t,messageText:u,reply:g,s2sInstanceKey:v,stickerId:h,thread:a,voiceClip:q}),b,function(a){k(v,a);d.failTrace(a,!0);throw c("unrecoverableViolation")("Encountered failure during Armadillo Message Send (UI)","messenger_e2ee_web",{error:a})})})}}g["default"]=a}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("exif-js-2.3.0",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(){var a=!1,b=this,c=function(a){if(a instanceof c)return a;if(!(this instanceof c))return new c(a);this.EXIFwrapped=a};typeof g!=="undefined"?(typeof h!=="undefined"&&h.exports&&(g=h.exports=c),g.EXIF=c):b.EXIF=c;var d=c.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},e=c.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},f=c.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},i=c.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},j=c.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function k(a){return!!a.exifdata}function l(a,b){b||a.match(/^data\:([^\;]+)\;base64,/im)[1]||"";a=a.replace(/^data\:([^\;]+)\;base64,/gim,"");b=atob(a);a=b.length;var c=new ArrayBuffer(a),d=new Uint8Array(c);for(var e=0;e<a;e++)d[e]=b.charCodeAt(e);return c}function m(a,b){var c=new XMLHttpRequest();c.open("GET",a,!0);c.responseType="blob";c.onload=function(a){(this.status==200||this.status===0)&&b(this.response)};c.send()}function n(a,b){function d(d){var e=o(d);a.exifdata=e||{};e=p(d);a.iptcdata=e||{};if(c.isXmpEnabled){e=y(d);a.xmpdata=e||{}}b&&b.call(a)}if(a.src)if(/^data\:/i.test(a.src)){var e=l(a.src);d(e)}else if(/^blob\:/i.test(a.src)){var f=new FileReader();f.onload=function(a){d(a.target.result)};m(a.src,function(a){f.readAsArrayBuffer(a)})}else{var g=new XMLHttpRequest();g.onload=function(){if(this.status==200||this.status===0)d(g.response);else throw"Could not load image";g=null};g.open("GET",a.src,!0);g.responseType="arraybuffer";g.send(null)}else if(self.FileReader&&(a instanceof self.Blob||a instanceof self.File)){var f=new FileReader();f.onload=function(a){d(a.target.result)};f.readAsArrayBuffer(a)}}function o(a){var b=new DataView(a);if(b.getUint8(0)!=255||b.getUint8(1)!=216)return!1;var c=2;a=a.byteLength;var d;while(c<a){if(b.getUint8(c)!=255)return!1;d=b.getUint8(c+1);if(d==225)return x(b,c+4,b.getUint16(c+2)-2);else c+=2+b.getUint16(c+2)}}function p(a){var b=new DataView(a);if(b.getUint8(0)!=255||b.getUint8(1)!=216)return!1;var c=2,d=a.byteLength,e=function(a,b){return a.getUint8(b)===56&&a.getUint8(b+1)===66&&a.getUint8(b+2)===73&&a.getUint8(b+3)===77&&a.getUint8(b+4)===4&&a.getUint8(b+5)===4};while(c<d){if(e(b,c)){var f=b.getUint8(c+7);f%2!==0&&(f+=1);f===0&&(f=4);var g=c+8+f;f=b.getUint16(c+6+f);return r(a,g,f)}c++}}var q={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function r(a,b,c){a=new DataView(a);var d={},e,f,g=b;while(g<b+c)a.getUint8(g)===28&&a.getUint8(g+1)===2&&(f=a.getUint8(g+2),f in q&&(e=a.getInt16(g+3),f=q[f],e=w(a,g+5,e),d.hasOwnProperty(f)?d[f]instanceof Array?d[f].push(e):d[f]=[d[f],e]:d[f]=e)),g++;return d}function s(b,c,d,e,f){var g=b.getUint16(d,!f),h={},i,j,k;for(k=0;k<g;k++)i=d+k*12+2,j=e[b.getUint16(i,!f)],!j&&a&&!1,h[j]=t(b,i,c,d,f);return h}function t(a,b,c,d,e){d=a.getUint16(b+2,!e);var f=a.getUint32(b+4,!e);c=a.getUint32(b+8,!e)+c;var g,h,i,j;switch(d){case 1:case 7:if(f==1)return a.getUint8(b+8,!e);else{d=f>4?c:b+8;g=[];for(i=0;i<f;i++)g[i]=a.getUint8(d+i);return g}case 2:d=f>4?c:b+8;return w(a,d,f-1);case 3:if(f==1)return a.getUint16(b+8,!e);else{d=f>2?c:b+8;g=[];for(i=0;i<f;i++)g[i]=a.getUint16(d+2*i,!e);return g}case 4:if(f==1)return a.getUint32(b+8,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getUint32(c+4*i,!e);return g}case 5:if(f==1){d=a.getUint32(c,!e);j=a.getUint32(c+4,!e);h=new Number(d/j);h.numerator=d;h.denominator=j;return h}else{g=[];for(i=0;i<f;i++)d=a.getUint32(c+8*i,!e),j=a.getUint32(c+4+8*i,!e),g[i]=new Number(d/j),g[i].numerator=d,g[i].denominator=j;return g}case 9:if(f==1)return a.getInt32(b+8,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getInt32(c+4*i,!e);return g}case 10:if(f==1)return a.getInt32(c,!e)/a.getInt32(c+4,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getInt32(c+8*i,!e)/a.getInt32(c+4+8*i,!e);return g}}}function u(a,b,c){var d=a.getUint16(b,!c);return a.getUint32(b+2+d*12,!c)}function v(a,b,c,d){c=u(a,b+c,d);if(!c)return{};else if(c>a.byteLength)return{};c=s(a,b,b+c,i,d);if(c.Compression)switch(c.Compression){case 6:if(c.JpegIFOffset&&c.JpegIFByteCount){d=b+c.JpegIFOffset;b=c.JpegIFByteCount;c.blob=new Blob([new Uint8Array(a.buffer,d,b)],{type:"image/jpeg"})}break;case 1:break;default:}else c.PhotometricInterpretation==2;return c}function w(a,b,c){var d="";for(var e=b;e<b+c;e++)d+=String.fromCharCode(a.getUint8(e));return d}function x(a,b){if(w(a,b,4)!="Exif")return!1;var c,g,h,i;b=b+6;if(a.getUint16(b)==18761)c=!1;else if(a.getUint16(b)==19789)c=!0;else return!1;if(a.getUint16(b+2,!c)!=42)return!1;var k=a.getUint32(b+4,!c);if(k<8)return!1;g=s(a,b,b+k,e,c);if(g.ExifIFDPointer){i=s(a,b,b+g.ExifIFDPointer,d,c);for(h in i){switch(h){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":i[h]=j[h][i[h]];break;case"ExifVersion":case"FlashpixVersion":i[h]=String.fromCharCode(i[h][0],i[h][1],i[h][2],i[h][3]);break;case"ComponentsConfiguration":i[h]=j.Components[i[h][0]]+j.Components[i[h][1]]+j.Components[i[h][2]]+j.Components[i[h][3]];break}g[h]=i[h]}}if(g.GPSInfoIFDPointer){i=s(a,b,b+g.GPSInfoIFDPointer,f,c);for(h in i){switch(h){case"GPSVersionID":i[h]=i[h][0]+"."+i[h][1]+"."+i[h][2]+"."+i[h][3];break}g[h]=i[h]}}g.thumbnail=v(a,b,k,c);return g}function y(a){if(!("DOMParser"in self))return;var b=new DataView(a);if(b.getUint8(0)!=255||b.getUint8(1)!=216)return!1;var c=2;a=a.byteLength;var d=new DOMParser();while(c<a-4)if(w(b,c,4)=="http"){var e=c-1,f=b.getUint16(c-2)-1;e=w(b,e,f);f=e.indexOf("xmpmeta>")+8;e=e.substring(e.indexOf("<x:xmpmeta"),f);f=e.indexOf("x:xmpmeta")+10;e=e.slice(0,f)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+e.slice(f);f=d.parseFromString(e,"text/xml");return A(f)}else c++}function z(a){var b={};if(a.nodeType==1){if(a.attributes.length>0){b["@attributes"]={};for(var c=0;c<a.attributes.length;c++){var d=a.attributes.item(c);b["@attributes"][d.nodeName]=d.nodeValue}}}else if(a.nodeType==3)return a.nodeValue;if(a.hasChildNodes())for(d=0;d<a.childNodes.length;d++){c=a.childNodes.item(d);var e=c.nodeName;if(b[e]==null)b[e]=z(c);else{if(b[e].push==null){var f=b[e];b[e]=[];b[e].push(f)}b[e].push(z(c))}}return b}function A(a){try{var b={};if(a.children.length>0)for(var c=0;c<a.children.length;c++){var d=a.children.item(c),e=d.attributes;for(var f in e){var g=e[f],h=g.nodeName;g=g.nodeValue;h!==void 0&&(b[h]=g)}h=d.nodeName;if(typeof b[h]=="undefined")b[h]=z(d);else{if(typeof b[h].push=="undefined"){g=b[h];b[h]=[];b[h].push(g)}b[h].push(z(d))}}else b=a.textContent;return b}catch(a){}}c.enableXmp=function(){c.isXmpEnabled=!0};c.disableXmp=function(){c.isXmpEnabled=!1};c.getData=function(a,b){if((self.Image&&a instanceof self.Image||self.HTMLImageElement&&a instanceof self.HTMLImageElement)&&!a.complete)return!1;!k(a)?n(a,b):b&&b.call(a);return!0};c.getTag=function(a,b){if(!k(a))return;return a.exifdata[b]};c.getIptcTag=function(a,b){if(!k(a))return;return a.iptcdata[b]};c.getAllTags=function(a){if(!k(a))return{};var b;a=a.exifdata;var c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};c.getAllIptcTags=function(a){if(!k(a))return{};var b;a=a.iptcdata;var c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};c.pretty=function(a){if(!k(a))return"";var b;a=a.exifdata;var c="";for(b in a)a.hasOwnProperty(b)&&(typeof a[b]=="object"?a[b]instanceof Number?c+=b+" : "+a[b]+" ["+a[b].numerator+"/"+a[b].denominator+"]\r\n":c+=b+" : ["+a[b].length+" values]\r\n":c+=b+" : "+a[b]+"\r\n");return c};c.readFromBinaryFile=function(a){return o(a)}}).call(this)}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("exif-js",["exif-js-2.3.0"],(function(a,b,c,d,e,f){e.exports=b("exif-js-2.3.0")()}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("remove-accents-0.4.2",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},b=Object.keys(a).join("|"),c=new RegExp(b,"g"),d=new RegExp(b,"");b=function(b){return b.replace(c,function(b){return a[b]})};var e=function(a){return!!a.match(d)};g.exports=b;g.exports.has=e;g.exports.remove=b}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("remove-accents",["remove-accents-0.4.2"],(function(a,b,c,d,e,f){e.exports=b("remove-accents-0.4.2")()}),null);/*FB_PKG_DELIM*/
__d("useSharedNUX",["CometNUXManagerContext","react","recoverableViolation","useNUXLoggers","useStable"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useContext,i=b.useEffect,j=b.useState;function a(a){var b=c("useStable")(function(){return a});if(b!==a){var d;c("recoverableViolation")("Error nux changed at runtime from "+((d=b)!=null?d:"null")+" to "+((d=a)!=null?d:"null")+", this is not supported and will lead to erratic behavior, we have continued to use your initially supplied nux","comet_ui")}d=j(!1);var e=d[0],f=d[1];d=h(c("CometNUXManagerContext"));var g=d.registerNUX;d=d.removeNUX;i(function(){if(b==null)return;return g(b,f,!0)},[b,g]);d=c("useNUXLoggers")(b,d);return[e,d]}g["default"]=a}),98);
__d("fileInputAcceptValues",[],(function(a,b,c,d,e,f){"use strict";a=[".png",".jpg",".jpeg"];b=["image/*","image/heif","image/heic"];c=["video/*","video/mp4","video/x-m4v","video/x-matroska",".mkv"];d=b.concat(c);f.CUSTOM_THUMBNAIL=a;f.PHOTO=b;f.VIDEO=c;f.PHOTO_AND_VIDEO=d}),66);
__d("CanvasToBlobImpl",["BlobFactory"],(function(a,b,c,d,e,f){function a(a,c){a=atob(a.substr(a.indexOf(",")+1));var d=new Uint8Array(a.length);for(var e=0;e<a.length;e++)d[e]=a.charCodeAt(e);return b("BlobFactory").getBlob([d],{type:c})}e.exports={getBlob:a}}),null);
__d("WebWorker",["invariant","BlobFactory","Bootloader","EventListener","FBLogger","SubscriptionsHandler","TrustedTypesWebWorkerScriptURLPolicy","URI","WebWorkerConfig","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","XHRRequest","cr:951783","emptyFunction","err","filterObject","getCrossOriginTransport","getWorkerInitScriptSPINParams","gkx","isSameOrigin","justknobx","memoize","nullthrows","performanceNow","recoverableViolation"],(function(a,b,c,d,e,f,g){var h,i,j=a.URL||a.webkitURL,k={remove:b("emptyFunction")},l=function(){"use strict";function c(a){var c=this;this.$2=!1;this.$3=null;this.$4=a;this.__worker=null;this.$5=b("emptyFunction");this.$6=b("emptyFunction");this.$7=[];this.$8=[];this.$9=!1;this.$10=new(b("SubscriptionsHandler"))();this.$1=b("cr:951783")!==null?b("cr:951783")(function(){c.$9||c.terminate()}):k;b("gkx")("708253")&&setTimeout(function(){!c.$9&&!c.isCurrentState("terminated")&&b("recoverableViolation")("WebWorker (resource: "+a.name+") allowCrossPageTransitions must be true on Comet, or you must handle cleaning up your worker.","comet_infra")},1e3);this.$11("constructed")}var d=c.prototype;d.setMessageHandler=function(a){this.$5=a||b("emptyFunction");return this};d.setErrorHandler=function(a){this.$6=a||b("emptyFunction");return this};d.postMessage=function(a,b){this.isCurrentState("constructed")&&g(0,5977);this.isCurrentState("terminated")&&g(0,5978);if(this.isCurrentState("preparing")){this.$7.push(this.postMessage.bind(this,a,b));return this}a={type:"message",message:a};b?this.getInterfaceableWorker().postMessage(a,b):this.getInterfaceableWorker().postMessage(a);return this};d.$12=function(){this.isCurrentState("terminated")||(this.$11("terminated"),this.__worker=null,this.$13(),this.$7=[],this.$8=[],this.$1&&this.$1.remove&&this.$1.remove())};d.terminate=function(){this.isCurrentState("executing")&&this.__worker!=null&&this.__worker.terminate(),this.$12()};d.execute=function(){this.isCurrentState("terminated")&&g(0,5979);if(["preparing","executing"].some(this.isCurrentState,this))return this;this.$11("preparing");c.prepareResource(this.$4,this.$14.bind(this));return this};d.setAllowCrossPageTransition=function(a){b("gkx")("708253")&&!a&&b("recoverableViolation")("allowAcrossPageTransitions must be true because we dont kill these in Comet.","comet_infra");this.$9=a;return this};d.isCurrentState=function(a){c.states.includes(a)||g(0,5980,a);return a===this.$3};d.$14=function(){this.isCurrentState("executing")&&g(0,5981);if(this.isCurrentState("terminated"))return;this.$4.useInitScript&&b("gkx")("5552")||this.$4.sameOriginURL||this.$4.source||g(0,19837,this.$4.name);if(this.$4.useInitScript&&b("gkx")("5552")){var a;a=b("nullthrows")((a=b("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(b("getWorkerInitScriptSPINParams")()))==null?void 0:a.toString());var d=new window.URL(this.$4.url,window.location.href).href;if(d==null)throw b("err")("Can't start up worker without a resource url.");this.__worker=this.constructWorker(a,this.$4.name);this.__worker.postMessage({bundleUrl:d,doNotStartBundle:!0,isDev:!1,resource:this.$4,type:"sr-init"})}else this.$4.sameOriginURL?this.__worker=this.constructWorker(this.$4.sameOriginURL):(this.__worker=this.constructWorker(c.evalWorkerURL),this.getInterfaceableWorker().postMessage(this.$4.source));this.$15("ping",Date.now());if(this.$4.dynamicModules)try{this.$15("defineModules",this.$4.dynamicModules)}catch(a){this.terminate();this.$16("define_error",{message:a.message});throw a}this.$17();this.$11("executing");this.$7.forEach(function(a){return a()});this.$7=[];this.$8.forEach(function(a){return a()});this.$8=[]};d.$13=function(){this.$10.release()};d.$15=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.getInterfaceableWorker().postMessage({type:a,args:c})};d.$16=function(a,d){var e=!(this.$4.useInitScript&&b("gkx")("5552"));c.$16(a,this.$4.name,babelHelpers["extends"]({},d,{cross_page_transition:!!this.$9,state:this.$3}),e)};c.$18=function(a){return Object.keys(b("filterObject")({object_url:a&&c.$19(),data_url:a&&c.$20(),worker:c.isSupported()},function(a){return!!a}))};d.$17=function(){this.$10.addSubscriptions(b("EventListener").listen(this.getInterfaceableWorker(),"message",this.$21.bind(this)),b("EventListener").listen(this.getInterfaceableWorker(),"error",this.$22.bind(this)))};d.$22=function(a){var b=this.$6(a);!b&&!a.defaultPrevented&&this.$16("exception",{message:a.message})};d.$21=function(b){b=b.data;switch(b.type){case"message":this.$5(b.message);break;case"pong":this.$2=!0;this.$16("executed",{dt:Math.floor(b.args[1]-b.args[0]),bytes:this.$4.source?this.$4.source.length:-1});break;case"terminate":this.terminate();break;case"haste-error":this.terminate();this.$16("haste_error",{message:b.message});break;case"console":var c=b.args.shift();["log","error","info","debug","warn"].includes(c)||g(0,5983,c);a.console[c].apply(a.console,b.args);break}};d.$11=function(a){c.states.includes(a)||g(0,5984,a),this.$16("transition",{next_state:a}),this.$3=a};c.prepareResource=function(d,e){e===void 0&&(e=b("emptyFunction"));d.sameOriginURL||d.url||d.source||g(0,5985);!c.isSupported()&&g(0,5986);if(d.sameOriginURL)e();else if(d.url&&b("isSameOrigin")(new(h||(h=b("URI")))(d.url),new(h||(h=b("URI")))(a.location.href)))d.sameOriginURL=d.url,e();else if(d.source)b("justknobx")._("819")&&b("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",d.name,d.url),c.$23()&&(d.sameOriginURL=c.$24(d.source)),e();else if(b("gkx")("5552")&&d.useInitScript===!0)e();else{b("justknobx")._("819")&&b("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",d.name,d.url);if(!d.loading){var f=(i||(i=b("performanceNow")))();d.loading=[e];c.$25(d.url,function(a){a?(d.source=a,c.$23()&&(d.sameOriginURL=c.$24(a)),c.$16("prepared",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:a.length},!1)):c.$16("failed",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:0},!1),d.loading.forEach(function(a){return a()}),d.loading=!1})}else d.loading.push(e)}return d};c.releaseResource=function(a){a.sameOriginURL.indexOf("blob:")===0&&(j.revokeObjectURL&&j.revokeObjectURL(a.sameOriginURL),a.sameOriginURL=null);return a};c.isSupported=function(){return p};c.isMessageChannelSupported=function(){return c.areTransferablesSupported()&&!!a.MessageChannel};c.areTransferablesSupported=function(){return c.isSupported()&&q()};c.$25=function(a,c){new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){c(a)}).setErrorHandler(c.bind(null,null)).send()};c.$24=function(a){c.$23()||g(0,5987);if(c.$19()){var d=b("BlobFactory").getBlob([a],{type:"application/javascript"});return j.createObjectURL(d)}if(c.$20())return"data:application/javascript,"+encodeURIComponent(a)};c.$19=function(){return b("BlobFactory").isSupported()&&n()};c.$20=function(){return o()};c.$23=function(){return c.$19()||c.$20()};c.$16=function(a,d,e,f){if(!b("WebWorkerConfig").logging.enabled)return;b("Bootloader").loadModules(["BanzaiLogger"],function(g){g.log(b("WebWorkerConfig").logging.config,babelHelpers["extends"]({},e,{features_array:c.$18(f),event:a,resource:d}))},"WebWorker")};d.constructWorker=function(a,b){return m(a,b)};d.$26=function(a,b){if(this.isCurrentState("preparing")){this.$8.push(this.$26.bind(this,a,b));return}this.getInterfaceableWorker().postMessage({type:"port",message:a},b)};d.createMessageChannel=function(a,b){var c=new MessageChannel();this.$26(a,[c.port2].concat(b||[]));c.port1.start();return c.port1};d.getInterfaceableWorker=function(){return this.__worker};return c}();l.states=["constructed","preparing","executing","terminated"];l.evalWorkerURL=b("WebWorkerConfig").evalWorkerURL;function m(c,d){return new a.Worker(b("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(c),d!=null?{name:d}:{})}var n=b("memoize")(function(){var a,c;if(!j||!j.createObjectURL)return!1;try{a=j.createObjectURL(b("BlobFactory").getBlob([""],{type:"application/javascript"}));var d=m(a);d.terminate();c=!0}catch(a){c=!1}finally{j.revokeObjectURL&&j.revokeObjectURL(a)}return c}),o=b("memoize")(function(){try{var a=m("data:application/javascript,");a.terminate();a=!0}catch(b){a=!1}return a}),p=!!a.Worker,q=b("memoize")(function(){try{var a=m(l.evalWorkerURL),b=new ArrayBuffer(0);a.postMessage({buffer:b},[b]);a.terminate();b=!0}catch(a){b=!1}return b});e.exports=l}),null);
__d("dataURLToBlob",["BlobFactory","CanvasToBlobImpl","CanvasToBlobResource","Promise","WebWorker"],(function(a,b,c,d,e,f,g){var h=a.URL||a.webkitURL||{};function e(a,e){if(!h.createObjectURL||!c("BlobFactory").isSupported)return b("Promise").reject("Browser doesn't support this feature");if(c("WebWorker").isSupported())return new(b("Promise"))(function(b,d){var f=new(c("WebWorker"))(c("CanvasToBlobResource")).setMessageHandler(function(a){b(a),f.terminate()}).setErrorHandler(function(a){d(a.message),f.terminate()}).execute().postMessage({dataURL:a,fileType:e})});else return b("Promise").resolve(d("CanvasToBlobImpl").getBlob(a,e))}g["default"]=e}),98);
__d("canvasToBlob",["Promise","dataURLToBlob","promiseDone"],(function(a,b,c,d,e,f,g){function a(a,d,e){return new(b("Promise"))(function(b,f){if(a.toBlob)a.toBlob(b,d,e);else{var g=a.toDataURL(d,e);c("promiseDone")(c("dataURLToBlob")(g,d).then(function(a){b(a)},f))}})}g["default"]=a}),98);
__d("VideoThumbnail_UNTYPED",["invariant"],(function(a,b,c,d,e,f,g){a=function(){"use strict";function a(a){this.$1=a}var b=a.prototype;b.getURL=function(){return this.$1};b.getData=function(){g(0,4844)};a.addTextToCanvasContext=function(a,b,c,d,e,f,g,h,i){a.fillStyle=h;a.textAlign=i;a.font=f+"px "+g;h=i==="center"?d+e/2:d;g=1;i=b.split("\n");for(d=i,b=Array.isArray(d),i=0,d=b?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(b){if(i>=d.length)break;j=d[i++]}else{i=d.next();if(i.done)break;j=i.value}j=j;var k="",l="";j=j.split(" ");for(var j=j,m=Array.isArray(j),n=0,j=m?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=j.length)break;o=j[n++]}else{n=j.next();if(n.done)break;o=n.value}o=o;l+=o;var p=a.measureText(l).width,q=a.measureText(o).width;if(q>e){k.length>0&&(a.fillText(k,h,c+f*g),g++);q="";var r="";for(var s=o,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}v=v;r+=v;var w=a.measureText(r).width;w>e?(a.fillText(q,h,c+f*g),q=v,r=v,g++):q=r}k=q+" ";l=q+" "}else p>e?(a.fillText(k,h,c+f*g),k=o+" ",l=o+" ",g++):(l+=" ",k=l)}a.fillText(k,h,c+f*g);g++}return a};return a}();e.exports=a}),null);
__d("CanvasVideoThumbnail",["EventListener","Promise","VideoThumbnail_UNTYPED","canvasToBlob","promiseDone"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(d,a);function d(b,c,d,e,f,g,h){var i;e===void 0&&(e=null);f===void 0&&(f=null);g===void 0&&(g=0);h===void 0&&(h=0);i=a.call(this,null)||this;i.$CanvasVideoThumbnail1=b;i.$CanvasVideoThumbnail2=c;i.$CanvasVideoThumbnail3=d;i.$CanvasVideoThumbnail4=e;i.$CanvasVideoThumbnail5=f;i.$CanvasVideoThumbnail6=g;i.$CanvasVideoThumbnail7=h;i.$CanvasVideoThumbnail8=i.$CanvasVideoThumbnail1.toDataURL("image/jpeg");return i}var e=d.prototype;e.getCanvas=function(){return this.$CanvasVideoThumbnail1};e.getTime=function(){return this.$CanvasVideoThumbnail3?this.$CanvasVideoThumbnail3:0};e.getURL=function(){this.$CanvasVideoThumbnail8||(this.$CanvasVideoThumbnail8=this.$CanvasVideoThumbnail1.toDataURL("image/jpeg"));return this.$CanvasVideoThumbnail8};e.getData=function(){var a=this,d=document.createElement("canvas"),e=d.getContext("2d"),f=this.$CanvasVideoThumbnail2;return new(b("Promise"))(function(b,g){var h=c("EventListener").listen(f,"seeked",function(){h.remove(),a.$CanvasVideoThumbnail9(d,e),c("promiseDone")(c("canvasToBlob")(d,"image/jpeg").then(b,g))});f.currentTime=a.$CanvasVideoThumbnail3})};e.getDataWithText=function(a,d,e,f,g,h,i,j){var k=this,l=document.createElement("canvas"),m=l.getContext("2d"),n=this.$CanvasVideoThumbnail2;return new(b("Promise"))(function(b,o){var p=c("EventListener").listen(n,"seeked",function(){p.remove(),m.fillStyle=i,m.textAlign=j,k.$CanvasVideoThumbnail9(l,m),m=c("VideoThumbnail_UNTYPED").addTextToCanvasContext(m,a,d,e,f,g,h,i,j),c("promiseDone")(c("canvasToBlob")(l,"image/jpeg").then(b,o))});n.currentTime=k.$CanvasVideoThumbnail3})};e.$CanvasVideoThumbnail9=function(a,b){var c=this.$CanvasVideoThumbnail2;this.$CanvasVideoThumbnail4||this.$CanvasVideoThumbnail5?(a.width=this.$CanvasVideoThumbnail4?this.$CanvasVideoThumbnail4:c.videoWidth,a.height=this.$CanvasVideoThumbnail5?this.$CanvasVideoThumbnail5:c.videoHeight,this.$CanvasVideoThumbnail10(a,b)):(a.width=c.videoWidth,a.height=c.videoHeight,b.drawImage(c,0,0,a.width,a.height))};e.$CanvasVideoThumbnail10=function(a,b){var c=this.$CanvasVideoThumbnail2,d=this.$CanvasVideoThumbnail6,e=this.$CanvasVideoThumbnail7,f=this.$CanvasVideoThumbnail4?this.$CanvasVideoThumbnail4:a.width,g=this.$CanvasVideoThumbnail5?this.$CanvasVideoThumbnail5:a.height;b.drawImage(c,d,e,f,g,0,0,a.width,a.height)};return d}(c("VideoThumbnail_UNTYPED"));g["default"]=a}),98);
__d("declareNUXRequireable",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("BootloadedReact",["Bootloader","react"],(function(a,b,c,d,e,f,g){var h=d("react"),i=d("react").useLayoutEffect,j=function(a){c("Bootloader").loadModules(["ReactDOM"],a,"BootloadedReact")};function a(a,b,c){j(function(d){if(c!=null)return d.render(h.jsx(k,{onRender:c,children:a}),b,"BootloadedReact.js");else d.render(a,b,"BootloadedReact.js")})}function b(a){j(function(b){b.unmountComponentAtNode(a,f.id)})}function k(a){var b=a.onRender;i(function(){b()},[b]);return a.children}g.render=a;g.unmountComponentAtNode=b}),98);
__d("getOrCreateDOMID",["uniqueID"],(function(a,b,c,d,e,f,g){function a(a){a.id||(a.id=c("uniqueID")());return a.id}g["default"]=a}),98);
__d("ContextualThing",["CSS","containsNode","ge","getOrCreateDOMID"],(function(a,b,c,d,e,f,g){function a(a,b){a.setAttribute("data-ownerid",c("getOrCreateDOMID")(b))}function b(a,b){b=b;while(b){if(c("containsNode")(a,b))return!0;b=h(b)}return!1}function h(a){a=a;var b;while(a){if(a.getAttribute&&(b=a.getAttribute("data-ownerid")))return c("ge")(b);a=a.parentNode}return null}function e(a,b){a=a;var e;while(a&&!d("CSS").hasClass(a,b))a.getAttribute&&(e=a.getAttribute("data-ownerid"))?a=c("ge")(e):a=a.parentNode;return a}g.register=a;g.containsIncludingLayers=b;g.getContext=h;g.parentByClass=e}),98);
__d("DOMDimensions",["Style","getDocumentScrollElement"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a?a.offsetHeight:0;a=a?a.offsetWidth:0;return{height:b,width:a}}function b(a){a=c("getDocumentScrollElement")(a);var b=a.scrollWidth||0;a=a.scrollHeight||0;return{width:b,height:a}}function d(a,b,d,e,f){var g;switch(b){case"left":case"right":case"top":case"bottom":g=[b];break;case"width":g=["left","right"];break;case"height":g=["top","bottom"];break;default:throw Error("Invalid plane: "+b)}b=function(b,d){var e=0;for(var f=0;f<g.length;f++)e+=parseFloat(c("Style").get(a,b+"-"+g[f]+d))||0;return e};return(d?b("padding",""):0)+(e?b("border","-width"):0)+(f?b("margin",""):0)}g.getElementDimensions=a;g.getDocumentDimensions=b;g.measureElementBox=d}),98);
__d("getElementText",["isElementNode","isTextNode"],(function(a,b,c,d,e,f,g){var h=null;function a(a){if(c("isTextNode")(a))return a.data;else if(c("isElementNode")(a)){if(h===null){var b=document.createElement("div");h=b.textContent!=null?"textContent":"innerText"}return a[h]}else return""}g["default"]=a}),98);
__d("isContentEditable",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a;while(a instanceof HTMLElement){if(a.contentEditable==="true"||a.contentEditable==="plaintext-only")return!0;a=a.parentElement}return!1}f["default"]=a}),66);
__d("isElementInteractive",["isContentEditable"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(["EMBED","INPUT","OBJECT","SELECT","TEXTAREA"]),i=new Set(["button","checkbox","radio","submit"]);function a(a){if(!a instanceof HTMLElement)return!1;var b=c("isContentEditable")(a),d=h.has(a.nodeName);a=a instanceof HTMLInputElement&&i.has(a.type);return(b||d)&&!a}g["default"]=a}),98);
__d("KeyEventController",["Bootloader","DOMQuery","Event","Run","emptyFunction","getElementText","isContentEditable","isElementInteractive","isEmpty"],(function(a,b,c,d,e,f,g){var h=null,i={BACKSPACE:[8],TAB:[9],RETURN:[13],ALT:[18],ESCAPE:[27],LEFT:[37,63234],UP:[38,63232],RIGHT:[39,63235],DOWN:[40,63233],NUMPAD_ADD:[43],NUMPAD_SUBSTRACT:[45],DELETE:[46],COMMA:[188],PERIOD:[190],SLASH:[191],"`":[192],"[":[219],"]":[221],PAGE_UP:[33],PAGE_DOWN:[34],END:[35],HOME:[36],SPACE:[32],KP_DOT:[46,110],"-":[189],"=":[187],FORWARD_SLASH:[191]},j=(a={},a[8]=1,a[9]=1,a[13]=1,a[27]=1,a[32]=1,a[37]=1,a[63234]=1,a[38]=1,a[63232]=1,a[39]=1,a[63235]=1,a[40]=1,a[63233]=1,a[46]=1,a);b=function(){function a(){var a=this;this.handlers={};["keyup","keydown","keypress"].forEach(function(b){return document.addEventListener(b,a.onkeyevent.bind(a,"on"+b))})}var b=a.prototype;b.mapKey=function(a){a=a;if(/^[0-9]$/.test(a+"")){typeof a!=="number"&&(a=a.charCodeAt(0)-48);return[48+a,96+a]}a+="";var b=i[a.toUpperCase()];return b?b:[a.toUpperCase().charCodeAt(0)]};b.onkeyevent=function(a,b){var d=b;d=c("Event").$E(d);b=this.handlers[d.keyCode]||this.handlers[d.which];if(b)for(var e=0;e<b.length;e++){var f=b[e].callback,g=b[e].filter;try{if(!g||g(d,a)){g=function(){var b=f(d,a),e=d.which||d.keyCode;c("Bootloader").loadModules(["KeyEventTypedLogger"],function(a){new a().setAction("key_shortcut").setKey(d.key||"").setKeyChar(String.fromCharCode(e)).setKeyCode(e).addToExtraData("is_trusted",d.isTrusted).log()},"KeyEventController");if(b===!1)return{v:c("Event").kill(d)}}();if(typeof g==="object")return g.v}}catch(a){}}return!0};b.resetHandlers=function(){for(var a in this.handlers)if(Object.prototype.hasOwnProperty.call(this.handlers,a)){var b=this.handlers[a].filter(function(a){return a.preserve()});b.length?this.handlers[a]=b:delete this.handlers[a]}};a.getInstance=function(){return h||(h=new a())};a.defaultFilter=function(b,d){b=c("Event").$E(b);return a.filterEventTypes(b,d)&&a.filterEventTargets(b,d)&&a.filterEventModifiers(b,d)};a.filterEventTypes=function(a,b){return b==="onkeydown"?!0:!1};a.filterEventTargets=function(a,b){b=a.getTarget();return!c("isElementInteractive")(b)||a.keyCode in j&&(d("DOMQuery").isNodeOfType(b,["input","textarea"])&&b.value.length===0||c("isContentEditable")(b)&&c("getElementText")(b).length===0)};a.filterEventModifiers=function(a,b){return a.ctrlKey||a.altKey||a.metaKey||a.repeat?!1:!0};a.registerKeyAcrossTransitions=function(b,d,e,f){e===void 0&&(e=a.defaultFilter);f===void 0&&(f=!1);return a.registerKey(b,d,e,f,c("emptyFunction").thatReturnsTrue)};a.registerKey=function(b,e,f,g,h){f===void 0&&(f=a.defaultFilter);g===void 0&&(g=!1);h===void 0&&(h=c("emptyFunction").thatReturnsFalse);b=b;var i=a.getInstance(),j=b==null?[]:i.mapKey(b);c("isEmpty")(i.handlers)&&d("Run").onLeave(i.resetHandlers.bind(i));var k={};for(var l=0;l<j.length;l++){b=""+j[l];(!i.handlers[b]||g)&&(i.handlers[b]=[]);var m={callback:e,filter:f,preserve:h};k[b]=m;i.handlers[b].push(m)}return{remove:function(){for(var a in k){if(i.handlers[a]&&i.handlers[a].length){var b=i.handlers[a].indexOf(k[a]);b>=0&&i.handlers[a].splice(b,1)}delete k[a]}}}};a.registerKeyForButtonCallback=function(b,c){return a.registerKey(b,function(){c.click();return!1})};return a}();g["default"]=b}),98);
__d("KeyStatus",["Event","ExecutionEnvironment"],(function(a,b,c,d,e,f,g){var h=null,i=null;function j(){i||(i=c("Event").listen(window,"blur",function(){h=null,k()}))}function k(){i&&(i.remove(),i=null)}function a(a){h=c("Event").getKeyCode(a),j()}function b(){h=null,k()}if(c("ExecutionEnvironment").canUseDOM){f=document.documentElement;if(f)if(f.addEventListener)f.addEventListener("keydown",a,!0),f.addEventListener("keyup",b,!0);else if(f.attachEvent){f=f.attachEvent;f("onkeydown",a);f("onkeyup",b)}}function d(){return!!h}function e(){return h}g.isKeyDown=d;g.getKeyDownCode=e}),98);
__d("isValidReactElement",[],(function(a,b,c,d,e,f){var g=typeof Symbol==="function"&&Symbol["for"]&&Symbol["for"]("react.element")||60103;function a(a){return!!(typeof a==="object"&&a!==null&&a.$$typeof===g)}f["default"]=a}),66);
__d("Layer",["invariant","ArbiterMixin","BehaviorsMixin","BootloadedReact","CSS","ContextualThing","DOM","DataStore","Event","FBLogger","HTML","KeyEventController","KeyStatus","Parent","Style","ge","isNode","isValidReactElement","mixin","removeFromArray","setImmediate"],(function(a,b,c,d,e,f,g,h){b("KeyStatus");var i=[],j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,d){var e;e=b.call(this)||this;e._config=a||{};if(d){e._configure(e._config,d);a=e._config.addedBehaviors||[];e.enableBehaviors(e._getDefaultBehaviors().concat(a))}else c("FBLogger")("layer").warn("The markup param wasn't provided to the Layer constructor");return e}var e=a.prototype;e.init=function(a){this._configure(this._config,a);a=this._config.addedBehaviors||[];this.enableBehaviors(this._getDefaultBehaviors().concat(a));this._initialized=!0;return this};e._configure=function(a,b){var e=this;if(b){var f=c("isNode")(b),g=typeof b==="string"||c("HTML").isHTML(b);this.containsReactComponent=c("isValidReactElement")(b);!f&&!g&&!this.containsReactComponent&&c("FBLogger")("layer").warn("Layer must be init with HTML, DOM node or React instance");if(g)b=c("HTML")(b).getRootNode();else if(this.containsReactComponent){f=document.createElement("div");var h=!0;d("BootloadedReact").render(b,f,function(){e.inform("reactshow"),h||e.updatePosition()});h=!1;b=this._reactContainer=f}}this._root=this._buildWrapper(a,b);a.attributes&&c("DOM").setAttributes(this._root,a.attributes);a.classNames&&a.classNames.forEach(d("CSS").addClass.bind(null,this._root));d("CSS").addClass(this._root,"uiLayer");a.causalElement&&(this._causalElement=c("ge")(a.causalElement));a.permanent&&(this._permanent=a.permanent);a.isStrictlyControlled&&(this._isStrictlyControlled=a.isStrictlyControlled);d("DataStore").set(this._root,"layer",this)};e._getDefaultBehaviors=function(){return[]};e.getCausalElement=function(){return this._causalElement};e.setCausalElement=function(a){this._causalElement=a;return this};e.getInsertParent=function(){return this._insertParent||document.body};e.getRoot=function(){this._root||(this._destroyed?c("FBLogger")("layer").warn("No root node for this Layer. It has either not yet been set or the Layer has been destroyed.  This layer has been destroyed."):c("FBLogger")("layer").warn("No root node for this Layer. It has probably not been set."));return this._root};e.getContentRoot=function(){return this.getRoot()};e._buildWrapper=function(a,b){return b};e.setInsertParent=function(a){a&&(this._shown&&a!==this.getInsertParent()&&(c("DOM").appendContent(a,this.getRoot()),this.updatePosition()),this._insertParent=a);return this};e.showAfterDelay=function(a){window.setTimeout(this.show.bind(this),a)};e.show=function(){var b=this;if(this._shown)return this;var e=this.getRoot();e!=null||h(0,5142);this.inform("beforeshow");c("Style").set(e,"visibility","hidden");c("Style").set(e,"overflow","hidden");d("CSS").show(e);c("DOM").appendContent(this.getInsertParent(),e);this.updatePosition()!==!1?(this._shown=!0,this.inform("show"),a.inform("show",this),this._permanent||window.setTimeout(function(){b._shown&&i.push(b)},0)):d("CSS").hide(e);c("Style").set(e,"visibility","");c("Style").set(e,"overflow","");c("Style").set(e,"opacity","1");this.inform("aftershow");return this};e.hide=function(a){if(this._isStrictlyControlled){this._shown&&this.inform("runhide",a);return this}return this._hide()};e._hide=function(){if(this._hiding||!this._shown||this.inform("beforehide")===!1)return this;this._hiding=!0;this.inform("starthide")!==!1&&this.finishHide();return this};e.conditionShow=function(a){return a?this.show():this._hide()};e.finishHide=function(){if(this._shown){this._permanent||c("removeFromArray")(i,this);this._hiding=!1;this._shown=!1;var b=this.getRoot();b!=null||h(0,5143);d("CSS").hide(b);this.inform("hide");a.inform("hide",this)}};e.isShown=function(){return this._shown};e.updatePosition=function(){return!0};e.destroy=function(){this.containsReactComponent&&d("BootloadedReact").unmountComponentAtNode(this._reactContainer);this.finishHide();var b=this.getRoot();c("DOM").remove(b);this.destroyBehaviors();this.inform("destroy");a.inform("destroy",this);d("DataStore").remove(b,"layer");this._root=this._causalElement=null;this._destroyed=!0};a.init=function(a,b){a.init(b)};a.initAndShow=function(a,b){a.init(b).show()};a.show=function(a){a.show()};a.showAfterDelay=function(a,b){a.showAfterDelay(b)};a.getTopmostLayer=function(){return i[i.length-1]};a.informBlur=function(a){k=null;l=null;var b=i.length;if(!b)return;while(b--){var c=i[b],e=c.getContentRoot();e!=null||h(0,5144);if(d("ContextualThing").containsIncludingLayers(e,a))return;if(c.inform("blur",{target:a})===!1||c.isShown())return}};return a}(c("mixin")(c("ArbiterMixin"),c("BehaviorsMixin")));Object.assign(j,c("ArbiterMixin"));Object.assign(j.prototype,{_destroyed:!1,_initialized:!1,_root:null,_shown:!1,_hiding:!1,_causalElement:null,_reactContainer:null});c("Event").listen(document.documentElement,"keydown",function(a){if(c("KeyEventController").filterEventTargets(a,"keydown"))for(var b=i.length-1;b>=0;b--)if(i[b].inform("key",a)===!1)return!1;return!0},c("Event").Priority.URGENT);var k;c("Event").listen(document.documentElement,"mousedown",function(a){k=a.getTarget()});var l;c("Event").listen(document.documentElement,"mouseup",function(a){l=a.getTarget(),c("setImmediate")(function(){k=null,l=null})});c("Event").listen(document.documentElement,"click",function(a){var b=k,e=l;k=null;l=null;var f=i.length;if(!f)return;f=a.getTarget();if(f!==e||f!==b)return;if(!c("DOM").contains(document.documentElement,f))return;if(f.offsetWidth!=null&&!f.offsetWidth)return;if(d("Parent").byClass(f,"generic_dialog"))return;j.informBlur(f)});g["default"]=j}),98);/*FB_PKG_DELIM*/
__d("MWThreadUserNotOnboardedNuxWrapperQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4802583899845424"}),null);
__d("MWThreadUserNotOnboardedNuxWrapperQuery.graphql",["MWThreadUserNotOnboardedNuxWrapperQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"should_see_messenger_encrypted_backups_cutover_setup_interstitial_upsell",plural:!1,selections:[{args:null,documentName:"MWThreadUserNotOnboardedNuxWrapperQuery",fragmentName:"MWThreadUserNotOnboardedNux_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWThreadUserNotOnboardedNuxWrapperQuery",selections:[{kind:"RequiredField",field:a,action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWThreadUserNotOnboardedNuxWrapperQuery",selections:[a]},params:{id:b("MWThreadUserNotOnboardedNuxWrapperQuery_facebookRelayOperation"),metadata:{},name:"MWThreadUserNotOnboardedNuxWrapperQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("XMessengerSDKSbxEncryptedBackupsGDriveControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/eb/gdrive/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("EncryptedBackupsSupportedPlatformUtils",["$InternalEnum","ConstUriUtils","CookieConsentIFrameConfig","FBLogger","MWInboxProvider.react","XMessengerSDKSbxEncryptedBackupsGDriveControllerRouteBuilder","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useContext,i=b("$InternalEnum").Mirrored(["MESSENGER_DOT_COM","FACEBOOK_DOT_COM","FACEBOOK_INBOX","INSTAGRAM_DIRECT_INBOX"]),j=c("gkx")("1968579"),k=c("gkx")("7561"),l=c("gkx")("7597"),m={facebook:"facebook",messenger:"messenger"};function a(a){if(a!=null){return(a=d("ConstUriUtils").getUri(a))==null?void 0:(a=a.setProtocol("https"))==null?void 0:a.toString()}}function e(a){if(a!=null){var b;return(b=c("XMessengerSDKSbxEncryptedBackupsGDriveControllerRouteBuilder").buildUri({__cci:(b=c("CookieConsentIFrameConfig").consent_param)!=null?b:""}).setDomain(a))==null?void 0:(a=b.setProtocol("https"))==null?void 0:a.toString()}return null}function f(a){if(a==null)return null;var b=Object.values(m).includes(a);return!b?null:"https://www."+a+".com"}function n(){var a=h(d("MWInboxProvider.react").MWInboxProviderContext);if(j)return m.messenger;return k||a!=null?m.facebook:null}function o(){var a=h(d("MWInboxProvider.react").MWInboxProviderContext);if(l)return i.INSTAGRAM_DIRECT_INBOX;if(j)return i.MESSENGER_DOT_COM;k||c("FBLogger")("labyrinth_web").info("Unknown supported platform type. Falling back to facebook.com as Supported Platform type.");return a!=null?i.FACEBOOK_INBOX:i.FACEBOOK_DOT_COM}g.EncryptedBackupsSupportedPlatform=i;g.getFbsbxOrigin=a;g.getFbsbxUri=e;g.getSupportedGdrivePlatform=f;g.useMWEncryptedBackupsGetSupportedGdriveDomain=n;g.useMWEncryptedBackupsGetCurrentSupportedPlatform=o}),98);
__d("MWChatEncryptedBackupsQPLSource.enum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({CHAT_SETTINGS:"chat_settings",CHAT_TABS_UPSELL:"chat_tabs_upsell",JEWEL_UPSELL:"jewel_upsell",CHAT_SETTINGS_JEWEL_UPSELL:"chat_settings_jewel_upsell",THREAD_LIST_PRE_TLC:"thread_list_pre_tlc",THREAD_LIST_TLC:"thread_list_tlc",THREAD_LIST_POST_TLC:"thread_list_post_tlc",E2EE_CHAT_THREAD:"e2ee_chat_thread",MESSENGER_INBOX:"messenger_inbox",FB_DOT_COM_IN_THREAD_UPSELL:"fb_dot_com_in_thread_upsell",FB_DOT_COM_THREAD_LIST_UPSELL:"fb_dot_com_thread_list_restore_upsell",FB_DOT_COM_RESTORE_JEWEL_UPSELL:"fb_dot_com_restore_jewel_upsell",AUTO_RESTORE_LOGIN:"auto_restore_login",AUTO_RESTORE_RESTORE_FLOW:"auto_restore_restore_flow",DYI:"dyi",IG_SETTINGS:"ig_settings",IG_INBOX_AUTO_RESTORE:"ig_inbox_auto_restore"});c=a;f["default"]=c}),66);
__d("useEncryptedBackupsProcessState",["gkx","promiseDone","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useState,j=c("requireDeferred")("MWEncryptedBackupsProcessBackupIds.bs").__setRef("useEncryptedBackupsProcessState");function a(a){var b=a.encryptedBackupData,d=a.storage;a=i(1);var e=a[0],f=a[1];h(function(){c("gkx")("7110")&&b!=null?j.onReady(function(a){c("promiseDone")(a.processBackupIdsStoredProcedure(d),function(a){switch(a){case 1:break;case 2:f(2);break;case 3:f(3);break;case 4:f(4);break;case-1:f(-1);break;case 0:break}})}):f(0)},[b,d]);return{backupState:e,hasUserOptedOut:(a=b==null?void 0:b.isUserOptedOut)!=null?a:!1}}g["default"]=a}),98);
__d("MWChatEncryptedBackupsUpsellUtils",["gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";function h(){return c("gkx")("7553")===!0}function i(){return c("qex")._("1371")===!0}function j(){return c("qex")._("1371")===!0}function a(){return h()||i()||j()}g.shouldDisplayTLCUpsells=i;g.shouldDisplayAnyTLCUpsells=a}),98);
__d("MWThreadUserNotOnboardedNuxWrapper.react",["CometRelay","MWThreadUserNotOnboardedNuxWrapperQuery.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){var c=a.dialogTitle,e=a.setIsClosed;a=a.source;var f=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWThreadUserNotOnboardedNuxWrapperQuery.graphql"),{});f=f.viewer;f=f.should_see_messenger_encrypted_backups_cutover_setup_interstitial_upsell;return i.jsx(d("CometRelay").MatchContainer,{match:f,props:{dialogTitle:c,setIsClosed:e,source:a}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEncryptedBackupsThreadNux.react",["fbt","EncryptedBackupsSupportedPlatformUtils","MWChatEncryptedBackupsQPLSource.enum","MWChatEncryptedBackupsUpsellUtils","MWThreadUserNotOnboardedNuxWrapper.react","ReQL","ReQLSuspense","react","useEncryptedBackupsProcessState","useMAWIsUnsupportedBrowserNUXShown","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useMemo,k=b.useState;function a(a){var b=a.isOneToOne;a=a.peerName;var e=d("useMAWIsUnsupportedBrowserNUXShown").useMAWIsUnsupportedBrowserNUXShown(),g=c("useReStore")(),l=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.table("encrypted_backups"))},[g],f.id+":42");l=c("useEncryptedBackupsProcessState")({encryptedBackupData:l,storage:g});var m=l.backupState,n=l.hasUserOptedOut;l=k(!1);var o=l[0],p=l[1],q=b&&a!=null?h._("__JHASH__lDYRp3tl6Qf__JHASH__",[h._param("peer name",a)]):b?h._("__JHASH__N3qSfjqXNv6__JHASH__"):h._("__JHASH__jiKvDw_fxWh__JHASH__"),r=d("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform();return j(function(){if(o||e)return null;switch(r){case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.MESSENGER_DOT_COM:case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM:case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_INBOX:switch(m){case 2:if(d("MWChatEncryptedBackupsUpsellUtils").shouldDisplayTLCUpsells()&&!n)return i.jsx(c("MWThreadUserNotOnboardedNuxWrapper.react"),{dialogTitle:q,setIsClosed:p,source:c("MWChatEncryptedBackupsQPLSource.enum").E2EE_CHAT_THREAD});break;case 3:break;default:break}break;case d("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.INSTAGRAM_DIRECT_INBOX:return null}return null},[o,e,r,m,n,q])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWMessageList.react",["BaseTheme.react","CometPagelet.react","CometScreenReaderText.react","I64","MAWMessageListRow.react","MAWSecureAttachmentRenderer.react","MWBaseTheme","MWInboxThreadMessagesSpinner.react","MWMessageRow.react","MWPBaseMessageList.react","MWPMessageListColumn.react","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWPTypingIndicators.react","MWV2ContextBanner.react","MWV2MessageRowSimple.react","cr:4242","cr:6046","gkx","react","useMAWOfflineQueueLoadingIndicator","useMWPAriaLabelForMessageListGrid","useThreadLastMessageTimeMs","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react"),j=i.forwardRef,k=i.useId,l=i.useState,m={messageBubble:{backgroundColor:"x1vtvx1t",$$css:!0},messageListPagelet:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",height:"x5yr21d",$$css:!0}};function a(a){var b=a.theme;b=b===void 0?d("MWBaseTheme").empty:b;var e=a.threadKey;a=a.threadType;var f=d("MWPTypingIndicators.react").useTypingParticipants(e),g=d("MWPTypingIndicators.react").useAccessibilityText(f);if(f.length>0)return h.jsx(c("BaseTheme.react"),{config:b,children:h.jsx(c("MWV2MessageRowSimple.react"),{children:h.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:[h.jsx("div",{"aria-live":"polite",children:h.jsx(c("CometScreenReaderText.react"),{text:g})}),h.jsx(d("MWPTypingIndicators.react").MWPTypingIndicators,{messageBubbleStyle:m.messageBubble,threadKey:e,threadType:a})]})})});else return null}var n=d("withCometPlaceholder").withCometPlaceholder(a);function e(a,e){var f=a.cutoverOpenThread,g=a.entryPoint,i=a.onScrollToBottom,j=a.thread;a=c("useMWPAriaLabelForMessageListGrid")(j);var m=d("MWMessageRow.react").useTheme(),o=l(""),p=o[0];o=o[1];var q=k(),r=c("useThreadLastMessageTimeMs")(j.threadKey);r=r!=null?d("I64").lt(r,j.lastActivityTimestampMs):!0;var s=c("useMAWOfflineQueueLoadingIndicator")(!1,j),t=!s&&r;s=h.jsx(c("MWPBaseMessageList.react"),{entryPoint:g,onScrollToBottom:i,pageSize:c("gkx")("2233")?3:15,ref:e,renderFooter:function(){return h.jsxs(h.Fragment,{children:[h.jsx(n,{theme:m,threadKey:j.threadKey,threadType:j.threadType}),t&&b("cr:6046")?h.jsx(b("cr:6046"),{}):null]})},renderHeader:function(){return h.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:[h.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:20}),h.jsx(c("MWV2ContextBanner.react"),{thread:j}),h.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:10})]})},renderLoadingAnimation:function(){return h.jsx(c("MWInboxThreadMessagesSpinner.react"),{})},renderRow:function(a){var b=a.domElementRef,e=a.message,f=a.nextMessage;a=a.prevMessage;return h.jsx(c("MAWMessageListRow.react"),{domElementRef:b,modal:p,renderAttachment:d("MAWSecureAttachmentRenderer.react").render,row:{message:e,nextMessage:f,prevMessage:a},thread:j})},secondaryThread:f,thread:j});return h.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d","data-testid":void 0,id:q,children:h.jsx(d("CometPagelet.react").Placeholder,{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d",fallback:null,name:"MWV2MessageList",children:h.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:j,children:h.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:a,modal:p,setModal:o,children:b("cr:4242")==null?s:h.jsx(b("cr:4242"),{id:q,children:s})})})})})}e.displayName=e.name+" [from "+f.id+"]";i=j(e);g["default"]=i}),98);
__d("MAWCutoverSecureThreadDetail.react",["CometPagelet.react","ComponentMountUnmountSubspanLogger.react","I64","LSMessagingThreadTypeUtil","MAWArmadilloLinkContext.react","MAWMessageList.react","MWEncryptedBackupsThreadNux.react","MWPActor.react","ReQL","ReQLSuspense","cr:6045","react","useReStore","useSecureThreadDetailGetDevices"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useState;function a(a){var e=a.cutoverOpenThread,g=a.entryPoint,j=a.messageListRef,k=a.thread,l=c("useReStore")();c("useSecureThreadDetailGetDevices")(k,l);var m=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(l.table("participants")).getKeyRange(k.threadKey),d("ReQL").fromTableAscending(l.table("contacts"))).take(8)},[k.threadKey],f.id+":52");a=a.filter(function(a){return!d("I64").equal(a[0].contactId,m)});a=(a=a[0])==null?void 0:(a=a[1])==null?void 0:a.firstName;var n=i(!1),o=n[0],p=n[1];return h.jsxs(h.Fragment,{children:[h.jsx(d("CometPagelet.react").Placeholder,{fallback:null,name:"MWEncryptedBackupsThreadNux",children:h.jsx(c("MWEncryptedBackupsThreadNux.react"),{isOneToOne:d("LSMessagingThreadTypeUtil").isOneToOne(k.threadType),peerName:a})}),!o&&b("cr:6045")?h.jsx(b("cr:6045"),{}):null,h.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MAWCutoverSecureThreadDetail"}),h.jsx(d("MAWArmadilloLinkContext.react").MAWArmadilloLinkProvider,{children:h.jsx(c("MAWMessageList.react"),{cutoverOpenThread:e,entryPoint:g,onScrollToBottom:function(a){return p(a)},ref:j,thread:k})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureThreadDetail.react",["CometPlaceholder.react","ComponentMountUnmountSubspanLogger.react","I64","LSAuthorityLevel","LSIntEnum","MAWArmadilloLinkContext.react","MAWMessageList.react","cr:2522","react","useReStore","useSecureThreadDetailGetDevices"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useState;function a(a){var e=a.cutoverOpenThread,f=a.entryPoint,g=a.messageListRef;a=a.thread;var j=c("useReStore")();c("useSecureThreadDetailGetDevices")(a,j);j=i(!1);var k=j[0],l=j[1];j=e!=null&&d("I64").equal(e.authorityLevel,d("LSIntEnum").ofNumber(c("LSAuthorityLevel").AUTHORITATIVE));return h.jsxs(h.Fragment,{children:[h.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWCutoverEncryptedBackupsBanner",children:b("cr:2522")!=null&&j&&h.jsx(b("cr:2522"),{isShown:!k,thread:a})}),h.jsxs(d("MAWArmadilloLinkContext.react").MAWArmadilloLinkProvider,{children:[h.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MAWSecureThreadDetail"}),h.jsx(c("MAWMessageList.react"),{cutoverOpenThread:j?e:void 0,entryPoint:f,onScrollToBottom:function(a){return l(a)},ref:g,thread:a})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5925171094261418"}),null);/*FB_PKG_DELIM*/
__d("LSGetIfViewerIsWorkplaceUser",["gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,b=a[a.length-1];b.n;var d=[];return d[0]=c("gkx")("7530"),b.resolve(d)}b=a;g["default"]=b}),98);
__d("LSGetThreadParticipantDisplayName",["LSGetIfViewerIsWorkplaceUser"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return c.sp(b("LSGetIfViewerIsWorkplaceUser")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return d[0]?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2352696798]),f).then(function(a){return d[4]=a})},function(a){return d[2]=d[4]}]):(b=a.item,d[2]=b.name)})},function(a){return d[1]=d[2]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[2]=f:(b=a.item,d[2]=b.nickname)})},function(b){return c.ftr(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),f).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):(b=a.item,d[4]=b.firstName==null?b.name:b.firstName)})},function(a){return d[1]=d[2]==null?d[4]:d[2]}])},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSMessagingInitiatingSource",[],(function(a,b,c,d,e,f){a=Object.freeze({FACEBOOK_CHAT:0,FACEBOOK_INBOX:1,ROOMS_SIDE_CHAT:2,FACEBOOK_FULLSCREEN:3});f["default"]=a}),66);
__d("useLSMessagingInitiatingSource",["LSIntEnum","LSMessagingInitiatingSource","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a==null)return;else if(a==="Inbox")return d("LSIntEnum").ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_INBOX);else if(a==="FullscreenChat")return d("LSIntEnum").ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN);else if(a==="ChatTab")return d("LSIntEnum").ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_CHAT);else return d("LSIntEnum").ofNumber(c("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT)}g["default"]=a}),98);
__d("MWVersion.bs",["I64"],(function(a,b,c,d,e,f,g){"use strict";a=d("I64").of_string("2");g.v2=a}),98);
__d("MWGetOriginalEntrypoint",["I64","InteractionTracingMetrics","LSMessagingInitiatingSource","MWChatInteraction.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var e=d("MWChatInteraction.bs").get(d("I64").to_string(a));e=e!=null?c("InteractionTracingMetrics").get(e):null;return b!=null&&d("I64").to_int32(b)===c("LSMessagingInitiatingSource").FACEBOOK_INBOX?h(e,a):i(e,a)}function h(a,b){a=a==null?void 0:(a=a.annotations.string)==null?void 0:a.inboxEntrypoint;if(a!=null)return a;a=d("MWChatInteraction.bs").get("inbox_init");return a!=null&&d("I64").equal(b,d("I64").of_string(a))?"initInbox":"unknownInbox"}function i(a,b){a=a==null?void 0:(a=a.annotations.string)==null?void 0:a.entrypoint;if(a!=null)return a;a=d("MWChatInteraction.bs").get(d("MWChatInteraction.bs").MW_AUTO_CHAT_TAB_OPEN);a=a!=null?c("InteractionTracingMetrics").get(a):null;a=(a==null?void 0:(a=a.annotations.string)==null?void 0:a.thread_id)===d("I64").to_string(b);return a?"auto_open":"unknown"}g["default"]=a}),98);
__d("useMWSendToSentQPLLogger",["QPLUserFlow","Random","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function a(){var a=c("qpl")._(25313175,"1551");return h(function(){return{addSendToSentAnnotations:function(b,d){c("QPLUserFlow").addAnnotations(a,d,{instanceKey:b})},markSendToSentFail:function(b,d){c("QPLUserFlow").endFailure(a,d.name,{error:d,instanceKey:b})},markSendToSentPoint:function(b,d,e){c("QPLUserFlow").addPoint(a,d,{debugInfo:e,instanceKey:b})},markSendToSentStart:function(){var b=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(a,{instanceKey:b});return b},markSendToSentSuccess:function(b){c("QPLUserFlow").endSuccess(a,{instanceKey:b})}}},[a])}g["default"]=a}),98);
__d("MWLinkRegex",[],(function(a,b,c,d,e,f){"use strict";function a(){var a="(?:(?:[a-z]+:)?//)?",b="(?:\\S+(?::\\S*)?@)?",c="(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)",d="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",e="(?:\\.(?:((?:[a-z\\u00a1-\\uffff]{2,}))))\\.?",f="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?';a="(?:"+a+"|www\\.)"+b+"(?:localhost|"+c+d+e+")"+f+g;return new RegExp(a,"ig")}function b(){var a="(^|)[^@\\s]+@[^@]+[.][^@\\s]+(?!\\S)";return new RegExp(a,"ig")}f.getLinkRegex=a;f.getEmailRegex=b}),66);
__d("MWMsgMediaTypeLogUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({Application:"application",Audio:"audio",Avatar:"avatar",HotEmoji:"hot_emoji",File:"file",Gif:"gif",Image:"image",Link:"link",None:"none",Poll:"poll",Reaction:"reaction",Sticker:"sticker",Video:"video"});function a(a){var b=a.hasFile;b=b===void 0?!1:b;var c=a.hasGif;c=c===void 0?!1:c;var d=a.hasHotEmoji;d=d===void 0?!1:d;var e=a.hasImage;e=e===void 0?!1:e;var f=a.hasLinks;f=f===void 0?!1:f;var h=a.hasSticker;h=h===void 0?!1:h;var i=a.hasVideo;i=i===void 0?!1:i;a=a.hasVoiceClip;a=a===void 0?!1:a;var j=g.None;e?j=g.Image:i?j=g.Video:h?j=g.Sticker:c?j=g.Gif:a?j=g.Audio:d?j=g.HotEmoji:f?j=g.Link:b&&(j=g.File);return j}f.AttachmentType=g;f.getAttachmentType=a}),66);
__d("MWSharedMsgLogUtils",["$InternalEnum","I64","LSMessagingThreadTypeUtil","MAWEBSwitch","MWGetOriginalEntrypoint","MWLinkRegex","MWMsgMediaTypeLogUtils","MWVersion.bs","MultipleTabsLogger","URLMatcher","asyncToGeneratorRuntime","cr:6277","gkx","isStringNullOrEmpty","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({Send:"send",Reply:"reply",Forward:"forward",Share:"share",StoryReply:"story-reply"}),i=b("$InternalEnum")({Text:"text",NonText:"non-text"});function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){e.hasAttachment;var g=e.hasReply,j=e.hasStoryReply,k=e.hasText;e=babelHelpers.objectWithoutPropertiesLoose(e,["hasAttachment","hasReply","hasStoryReply","hasText"]);var l=h.Send;g?l=h.Reply:j&&(l=h.StoryReply);g=d("MWMsgMediaTypeLogUtils").getAttachmentType(e);j=k&&(!g||g===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?i.Text:i.NonText;e=!1;b("cr:6277")!=null&&(e=(yield b("cr:6277").isCutoverThreadKey(a.threadKey)));return{bool:{is_cutover:e,is_eb_enabled:c("MAWEBSwitch").isEnabled(),is_message_request:d("LSMessagingThreadTypeUtil").isMessageRequest(a),is_pdb_enabled:Boolean(c("gkx")("6543")),is_secure:d("LSMessagingThreadTypeUtil").isSecure(a.threadType),use_maw_shared_worker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},string:{action_type:l,attachment_type:g,hasMultipleTabs:yield d("MultipleTabsLogger").getMultipleTabsAnnotation(),message_type:j,mw_version:d("I64").to_string(d("MWVersion.bs").v2),original_entrypoint:c("MWGetOriginalEntrypoint")(a.threadKey,f),thread_id:d("I64").to_string(a.threadKey),thread_subtype:a.threadSubtype!=null?d("I64").to_string(a.threadSubtype):null,thread_type:d("I64").to_string(a.threadType)}}});return j.apply(this,arguments)}function e(a,e,f,g){var j=e.hasFile;j=j===void 0?!1:j;var k=e.hasGif;k=k===void 0?!1:k;var l=e.hasHotEmoji;l=l===void 0?!1:l;var m=e.hasImage;m=m===void 0?!1:m;var n=e.hasLinks;n=n===void 0?!1:n;var o=e.hasReply;o=o===void 0?!1:o;var p=e.hasSticker;p=p===void 0?!1:p;var q=e.hasStoryReply;q=q===void 0?!1:q;var r=e.hasText;r=r===void 0?!1:r;var s=e.hasVideo;s=s===void 0?!1:s;e=e.hasVoiceClip;e=e===void 0?!1:e;var t=h.Send;o?t=h.Reply:q&&(t=h.StoryReply);o=d("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:j,hasGif:k,hasHotEmoji:l,hasImage:m,hasLinks:n,hasSticker:p,hasVideo:s,hasVoiceClip:e});q=r&&(!o||o===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?i.Text:i.NonText;d("MultipleTabsLogger").addAnnotationWithInteractionUuid(a.getTraceId());a.addAnnotation("attachment_type",o);a.addAnnotation("action_type",t);a.addAnnotation("message_type",q);a.addAnnotation("original_entrypoint",c("MWGetOriginalEntrypoint")(f.threadKey,g));a.addAnnotation("thread_id",d("I64").to_string(f.threadKey));a.addAnnotation("thread_type",d("I64").to_string(f.threadType));f.threadSubtype!=null&&a.addAnnotation("thread_subtype",d("I64").to_string(f.threadSubtype));b("cr:6277")!=null&&c("promiseDone")(b("cr:6277").isCutoverThreadKey(f.threadKey),function(b){a.addAnnotationBoolean("is_cutover",b)});a.addAnnotationBoolean("is_secure",d("LSMessagingThreadTypeUtil").isSecure(f.threadType));a.addAnnotationBoolean("is_eb_enabled",c("MAWEBSwitch").isEnabled());a.addAnnotationBoolean("use_maw_shared_worker",d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker());a.addAnnotationBoolean("is_pdb_enabled",Boolean(c("gkx")("6543")))}function f(a,b,e,f,g,h,i){var j=!c("isStringNullOrEmpty")(a),k=!1;a!=null&&c("URLMatcher").multiMatchToPattern(a,d("MWLinkRegex").getLinkRegex()).length>0&&c("URLMatcher").multiMatchToPattern(a,d("MWLinkRegex").getEmailRegex()).length===0&&(k=!0);a=!1;h=h!=null;h?a=!0:g!=null&&(a=!0);var l=!1,m=!1,n=!1;if(i!=null&&i.length>0){a=!0;for(i of i){var o=i.mimeType;o.indexOf("image")!==-1&&(l=!0);o.indexOf("video")!==-1&&(m=!0);o.indexOf("application")!==-1&&(n=!0)}}o=b!=null;i=e!=null;b=e!=null;e=f!=null;f=!e&&g!=null;return{hasAttachment:a,hasFile:n,hasGif:f,hasHotEmoji:o,hasImage:l,hasLinks:k,hasReply:i,hasSticker:e,hasStoryReply:b,hasText:j,hasVideo:m,hasVoiceClip:h}}g.ActionType=h;g.MsgType=i;g.getSendToSentAnnotations=a;g.addSendMessageMetadataForInteractionTrace=e;g.getMessageTypeParams=f}),98);
__d("BehaviorsMixin",[],(function(a,b,c,d,e,f){var g=function(){function a(a){this.$1=a,this.$2=!1}var b=a.prototype;b.enable=function(){this.$2||(this.$2=!0,this.$1.enable())};b.disable=function(){this.$2&&(this.$2=!1,this.$1.disable())};return a}(),h=1;function i(a){a.__BEHAVIOR_ID||(a.__BEHAVIOR_ID=h++);return a.__BEHAVIOR_ID}a={enableBehavior:function(a){this._behaviors||(this._behaviors={});var b=i(a);this._behaviors[b]||(this._behaviors[b]=new g(new a(this)));this._behaviors[b].enable();return this},disableBehavior:function(a){if(this._behaviors){a=i(a);this._behaviors[a]&&this._behaviors[a].disable()}return this},enableBehaviors:function(a){a.forEach(this.enableBehavior,this);return this},destroyBehaviors:function(){if(this._behaviors){for(var a in this._behaviors)this._behaviors[a].disable();this._behaviors={}}},hasBehavior:function(a){return this._behaviors&&i(a)in this._behaviors}};b=a;f["default"]=b}),66);
__d("getVendorPrefixedName",["invariant","ExecutionEnvironment","UserAgent","camelize"],(function(a,b,c,d,e,f,g,h){var i={},j=["Webkit","ms","Moz","O"],k=new RegExp("^("+j.join("|")+")"),l=c("ExecutionEnvironment").canUseDOM?document.createElement("div").style:{};function m(a){for(var b=0;b<j.length;b++){var c=j[b]+a;if(c in l)return c}return null}function n(a){switch(a){case"lineClamp":return c("UserAgent").isEngine("WebKit >= 315.14.2")?"WebkitLineClamp":null;default:return null}}function a(a){var b=c("camelize")(a);if(i[b]===void 0){var d=b.charAt(0).toUpperCase()+b.slice(1);k.test(d)&&h(0,957,a);c("ExecutionEnvironment").canUseDOM?i[b]=b in l?b:m(d):i[b]=n(b)}return i[b]}g["default"]=a}),98);
__d("shield",[],(function(a,b,c,d,e,f){function a(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];if(typeof a!=="function")throw new TypeError("shield expects a function as the first argument");return function(){return a.apply(b,d)}}f["default"]=a}),66);
__d("fbjs/lib/invariant",["invariant"],(function(a,b,c,d,e,f){"use strict";e.exports=b("invariant")}),null);
__d("fbjs/lib/warning",["warning"],(function(a,b,c,d,e,f){"use strict";e.exports=b("warning")}),null);/*FB_PKG_DELIM*/
__d("CometMiddotSeparator.react",["CometMiddot.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.Children.toArray(a.children).filter(Boolean).map(function(a,b){return h.jsxs(h.Fragment,{children:[b!==0?h.jsx(c("CometMiddot.react"),{}):null,a]},b)})}g["default"]=a}),98);
__d("MAWMiActLoadExistingThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyE2EEMetadataThreadExistsV2","MAWMiActCreateThreadInActWithMiData","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","WALoggerDeferred","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Running verify thread exists sproc for state "," threadKey: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Retry ACT thread creation for threadKey: ",""]);i=function(){return a};return a}function j(a,b){return a.runInTransaction(function(a){return c("LSVerifyE2EEMetadataThreadExistsV2")(d("LSIntEnum").ofNumber(15),b,d("LSIntEnum").ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),c("LSFactory")(a)).then(function(){})},"readwrite")}function k(a){return d("MAWMiActCreateThreadInActWithMiData").miActCreateThreadInActWithMiData(a.serverThreadKey,a.jidInt64,a.thread.lastActivityTimestampMs,a.thread.lastReadWatermarkTimestampMs,d("LSMessagingThreadTypeUtil").isGroup(a.thread.threadType)).then(function(){})}function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByThreadKey(a,b,"loadExistingThread"));switch(e.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:c("promiseDone")(d("WALoggerDeferred").LOG(i(),d("I64").to_string(b)));return k(e);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY_BY_JID:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY_BY_CHAT_ID:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:c("promiseDone")(d("WALoggerDeferred").LOG(h(),e.type,d("I64").to_string(b)));return j(a,b);default:e.type;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable miActThreadState.type: %s",e.type)}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("MWCMInboxHeaderCommunityGroupName.react",["fbt","CometPagelet.react","I64","LSSuspense","MWCMThreadTypes.react","PresenceStatusContext","Promise","cr:5141","react","useCommunityFolder"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useContext;function k(a){return a}function l(a){var e,f=a.renderWrapper;a=a.thread;f=f!=null?f:k;var g=c("useCommunityFolder")(a),l=j(c("PresenceStatusContext"));e=(e=b("cr:5141")==null?void 0:b("cr:5141")(a.threadKey))!=null?e:d("I64").neg_one;if(g==null){c("LSSuspense").throwErrorOrPromise(b("Promise").resolve());return null}var m=a.cannotReplyReason==="broadcast_chat_read_only",n=d("MWCMThreadTypes.react").isBroadcastThread(a.threadType)&&!m?h._("__JHASH__2Tijp2ORsFi__JHASH__"):d("MWCMThreadTypes.react").isPrivateThread(a.threadType)?h._("__JHASH__AR0EXhdbXqJ__JHASH__"):null;return f(d("I64").gt(e,d("I64").zero)&&l.getChatVisibility()?i.jsx(i.Fragment,{children:h._("__JHASH__zBhIvI5rTRs__JHASH__",[h._plural(d("I64").to_int32(e),"number")])}):d("MWCMThreadTypes.react").isBroadcastThread(a.threadType)&&!m?i.jsxs(i.Fragment,{children:[n," ",n!=null?"\u2022":null," ",g.name]}):i.jsxs(i.Fragment,{children:[g.name," ",n!=null?"\u2022":null," ",n]}))}l.displayName=l.name+" [from "+f.id+"]";function a(a){return i.jsx(d("CometPagelet.react").Placeholder,{className:"x193iq5w",fallback:null,name:"MWCMInboxHeaderCommunityGroupName",children:i.jsx(l,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("verifyChatTabContactExists",["LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyContactRowExists","Promise"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=a.db,f=a.threadKey;a=a.threadType;if(d("LSMessagingThreadTypeUtil").isOneToOne(a))return e.runInTransaction(function(a){return c("LSVerifyContactRowExists")(f,d("LSIntEnum").ofNumber(c("LSContactIdType").FBID),void 0,void 0,d("LSIntEnum").ofNumber(c("LSContactType").USER),void 0,void 0,void 0,void 0,!1,!1,d("LSIntEnum").ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),void 0,!1,d("LSIntEnum").ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),void 0,void 0,d("LSIntEnum").ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN),d("LSIntEnum").ofNumber(c("LSContactGender").UNKNOWN),d("LSIntEnum").ofNumber(c("LSContactViewerRelationship").UNKNOWN),void 0,c("LSFactory")(a))},"readwrite");else return b("Promise").resolve()}g["default"]=a}),98);
__d("verifyChatTabThreadExists",["LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyThreadRowExists","cr:6435","verifyChatTabContactExists"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=a.db,f=a.threadKey,g=a.threadType;return c("verifyChatTabContactExists")({db:e,threadKey:f,threadType:g}).then(function(){return b("cr:6435")!=null&&d("LSMessagingThreadTypeUtil").isSecure(g)?b("cr:6435")(e,f):e.runInTransaction(function(a){return c("LSVerifyThreadRowExists")(f,g,d("LSIntEnum").ofNumber(1),c("LSFactory")(a))},"readwrite")})}g["default"]=a}),98);
__d("useMWV2EnsureThatChatTabExists",["Int64Hooks","promiseDone","useReStore","verifyChatTabThreadExists"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.threadKey,e=a.threadType,f=c("useReStore")();d("Int64Hooks").useEffectInt64(function(){c("promiseDone")(c("verifyChatTabThreadExists")({db:f,threadKey:b,threadType:e}))},[f,b,e])}g["default"]=a}),98);
__d("GroupsCometAdminActivityLogItemSeeDetailsDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="10002305843176499"}),null);/*FB_PKG_DELIM*/
__d("TetraMWChatRTCButtonIcons.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.fill;a=a.size;return h.jsxs("svg",{height:a,role:"presentation",viewBox:"-5 -5 30 30",width:a,children:[h.jsx("path",{d:"M10.952 14.044c.074.044.147.086.22.125a.842.842 0 001.161-.367c.096-.195.167-.185.337-.42.204-.283.552-.689.91-.772.341-.078.686-.105.92-.11.435-.01 1.118.174 1.926.648a15.9 15.9 0 011.713 1.147c.224.175.37.43.393.711.042.494-.034 1.318-.754 2.137-1.135 1.291-2.859 1.772-4.942 1.088a17.47 17.47 0 01-6.855-4.212 17.485 17.485 0 01-4.213-6.855c-.683-2.083-.202-3.808 1.09-4.942.818-.72 1.642-.796 2.136-.754.282.023.536.17.711.392.25.32.663.89 1.146 1.714.475.808.681 1.491.65 1.926-.024.31-.026.647-.112.921-.11.35-.488.705-.77.91-.236.17-.226.24-.42.336a.841.841 0 00-.368 1.161c.04.072.081.146.125.22a14.012 14.012 0 004.996 4.996z",fill:b}),h.jsx("path",{d:"M10.952 14.044c.074.044.147.086.22.125a.842.842 0 001.161-.367c.096-.195.167-.185.337-.42.204-.283.552-.689.91-.772.341-.078.686-.105.92-.11.435-.01 1.118.174 1.926.648.824.484 1.394.898 1.713 1.147.224.175.37.43.393.711.042.494-.034 1.318-.754 2.137-1.135 1.291-2.859 1.772-4.942 1.088a17.47 17.47 0 01-6.855-4.212 17.485 17.485 0 01-4.213-6.855c-.683-2.083-.202-3.808 1.09-4.942.818-.72 1.642-.796 2.136-.754.282.023.536.17.711.392.25.32.663.89 1.146 1.714.475.808.681 1.491.65 1.926-.024.31-.026.647-.112.921-.11.35-.488.705-.77.91-.236.17-.226.24-.42.336a.841.841 0 00-.368 1.161c.04.072.081.146.125.22a14.012 14.012 0 004.996 4.996z",fill:"none",stroke:b})]})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.fill,c=a.showPresence;a=a.size;c=c!=null?c:!1;var d=c?"-3":"-5";return h.jsxs("svg",{height:a,role:"presentation",viewBox:d+" -5 30 30",width:a,children:[h.jsx("path",{d:"M19.492 4.112a.972.972 0 00-1.01.063l-3.052 2.12a.998.998 0 00-.43.822v5.766a1 1 0 00.43.823l3.051 2.12a.978.978 0 001.011.063.936.936 0 00.508-.829V4.94a.936.936 0 00-.508-.828zM10.996 18A3.008 3.008 0 0014 14.996V5.004A3.008 3.008 0 0010.996 2H3.004A3.008 3.008 0 000 5.004v9.992A3.008 3.008 0 003.004 18h7.992z",fill:b}),c?h.jsx("circle",{className:"x1xgahvj",cx:"24",cy:"10",r:"2"}):null]})}b.displayName=b.name+" [from "+f.id+"]";function c(a){a=a.fill;return h.jsx("svg",{height:"24px",name:"icon",role:"presentation",viewBox:"0 0 36 36",width:"24px",children:h.jsx("g",{transform:"translate(18,18)scale(1.2)translate(-18,-18)",children:h.jsx("path",{d:"M18,10 C16.6195,10 15.5,11.119 15.5,12.5 C15.5,13.881 16.6195,15 18,15 C19.381,15 20.5,13.881 20.5,12.5 C20.5,11.119 19.381,10 18,10 Z M16,25 C16,25.552 16.448,26 17,26 L19,26 C19.552,26 20,25.552 20,25 L20,18 C20,17.448 19.552,17 19,17 L17,17 C16.448,17 16,17.448 16,18 L16,25 Z M18,30 C11.3725,30 6,24.6275 6,18 C6,11.3725 11.3725,6 18,6 C24.6275,6 30,11.3725 30,18 C30,24.6275 24.6275,30 18,30 Z",fill:a,stroke:a},"lens")})})}c.displayName=c.name+" [from "+f.id+"]";g.AudioIcon=a;g.VideoIcon=b;g.InfoIcon=c}),98);/*FB_PKG_DELIM*/
__d("MWChatRTCButtonIcons.react",["cr:7190","react"],(function(a,b,c,d,e,f,g){"use strict";d("react"),g.AudioIcon=b("cr:7190").AudioIcon,g.InfoIcon=b("cr:7190").InfoIcon,g.VideoIcon=b("cr:7190").VideoIcon}),98);